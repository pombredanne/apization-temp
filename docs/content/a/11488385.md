---
title: "[Q#11484353][A#11488385] gson throws MalformedJsonException"
question_title: "gson throws MalformedJsonException"
question_text: "I'm using gson to convert a json string to a Java-Object. The value of result2 is exactly the same as the value of result1. (Copied from debugger; Backslashs added) The following exception is thrown while converting result1: com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Expected EOF at line 1 column 170 Converting result2 works fine. The json string is valid according to jsonlint.com."
answer_text: "I suspect that result1 has some characters at the end of it that you can't see in the debugger that follow the closing } character. What's the length of result1 versus result2? I'll note that result2 as you've quoted it has 169 characters. GSON throws that particular error when there's extra characters after the end of the object that aren't whitespace, and it defines whitespace very narrowly (as the JSON spec does) - only \\t, \\n, \\r, and space count as whitespace. In particular, note that trailing NUL (\\0) characters do not count as whitespace and will cause this error. If you can't easily figure out what's causing the extra characters at the end and eliminate them, another option is to tell GSON to parse in lenient mode:"
apization_code: "package com.stackoverflow.api;  import android.util.JsonReader; import com.google.appengine.repackaged.com.google.gson.Gson; import java.io.StringReader;  /**  * gson throws MalformedJsonException  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/11488385\">https://stackoverflow.com/a/11488385</a>  */ public class APIzator11488385 {    public static Userinfo throwMalformedjsonexception() throws RuntimeException {     Gson gson = new Gson();     JsonReader reader = new JsonReader(new StringReader(result1));     reader.setLenient(true);     return gson.fromJson(reader, Userinfo.class);   } }"
---

https://stackoverflow.com/q/11484353

I&#x27;m using gson to convert a json string to a Java-Object.
The value of result2 is exactly the same as the value of result1. (Copied from debugger; Backslashs added)
The following exception is thrown while converting result1:
com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Expected EOF at line 1 column 170
Converting result2 works fine.
The json string is valid according to jsonlint.com.


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
public static Userinfo getUserinfo()
{
    String result1 = http.POST("https://www.bitstamp.net/api/balance/",
                                postdata, true);
    String result2 = "{\"btc_reserved\": \"0\", \"fee\": \"0.5000\", \"btc_available\": \"0.10000000\", \"usd_reserved\": \"0\", \"btc_balance\": \"0.10000000\", \"usd_balance\": \"30.00\", \"usd_available\": \"30.00\"}";
    Gson gson = new Gson();
    Userinfo userinfo1 = gson.fromJson(result1, Userinfo.class); //throws Exception
    Userinfo userinfo2 = gson.fromJson(result2, Userinfo.class); //works fine

    return userinfo1;
}
private class Userinfo {

    public Userinfo(){
    }

    public float usd_balance;
    public float btc_balance ;
    public float usd_reserved;
    public float btc_reserved;
    public float usd_available;
    public float btc_available;
    public float fee;
    public float last_update;
}
```


## Original code snippet

https://stackoverflow.com/a/11488385

I suspect that result1 has some characters at the end of it that you can&#x27;t see in the debugger that follow the closing } character. What&#x27;s the length of result1 versus result2? I&#x27;ll note that result2 as you&#x27;ve quoted it has 169 characters.
GSON throws that particular error when there&#x27;s extra characters after the end of the object that aren&#x27;t whitespace, and it defines whitespace very narrowly (as the JSON spec does) - only \t, \n, \r, and space count as whitespace. In particular, note that trailing NUL (\0) characters do not count as whitespace and will cause this error.
If you can&#x27;t easily figure out what&#x27;s causing the extra characters at the end and eliminate them, another option is to tell GSON to parse in lenient mode:

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
Gson gson = new Gson();
JsonReader reader = new JsonReader(new StringReader(result1));
reader.setLenient(true);
Userinfo userinfo1 = gson.fromJson(reader, Userinfo.class);
```

## Produced APIzation

[`APIzator11488385.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator11488385.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import android.util.JsonReader;
import com.google.appengine.repackaged.com.google.gson.Gson;
import java.io.StringReader;

/**
 * gson throws MalformedJsonException
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/11488385">https://stackoverflow.com/a/11488385</a>
 */
public class APIzator11488385 {

  public static Userinfo throwMalformedjsonexception() throws RuntimeException {
    Gson gson = new Gson();
    JsonReader reader = new JsonReader(new StringReader(result1));
    reader.setLenient(true);
    return gson.fromJson(reader, Userinfo.class);
  }
}

```