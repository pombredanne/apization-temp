---
title: "[Q#5981605][A#5981825] Can Mockito capture arguments of a method called multiple times?"
question_title: "Can Mockito capture arguments of a method called multiple times?"
question_text: "I have a method that gets called twice, and I want to capture the argument of the second method call. Here's what I've tried: But I get a TooManyActualInvocations Exception, as Mockito thinks that doSomething should only be called once. How can I verify the argument of the second call of doSomething?"
answer_text: "I think it should be Sample from mockito javadoc:"
apization_code: "package com.stackoverflow.api;  import com.sun.xml.internal.bind.v2.schemagen.xmlschema.List; import org.ajoberstar.grgit.Person; import org.mockito.ArgumentCaptor;  /**  * Can Mockito capture arguments of a method called multiple times?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/5981825\">https://stackoverflow.com/a/5981825</a>  */ public class APIzator5981825 {    public static void captureArgument() throws RuntimeException {     ArgumentCaptor<Person> peopleCaptor = ArgumentCaptor.forClass(Person.class);     verify(mock, times(2)).doSomething(peopleCaptor.capture());     List<Person> capturedPeople = peopleCaptor.getAllValues();     assertEquals(\"John\", capturedPeople.get(0).getName());     assertEquals(\"Jane\", capturedPeople.get(1).getName());   } }"
---

https://stackoverflow.com/q/5981605

I have a method that gets called twice, and I want to capture the argument of the second method call.
Here&#x27;s what I&#x27;ve tried:
But I get a TooManyActualInvocations Exception, as Mockito thinks that doSomething should only be called once.
How can I verify the argument of the second call of doSomething?


```java
ArgumentCaptor<Foo> firstFooCaptor = ArgumentCaptor.forClass(Foo.class);
ArgumentCaptor<Foo> secondFooCaptor = ArgumentCaptor.forClass(Foo.class);
verify(mockBar).doSomething(firstFooCaptor.capture());
verify(mockBar).doSomething(secondFooCaptor.capture());
// then do some assertions on secondFooCaptor.getValue()
```


## Original code snippet

https://stackoverflow.com/a/5981825

I think it should be
Sample from mockito javadoc:

```java
verify(mockBar, times(2)).doSomething(...)
ArgumentCaptor<Person> peopleCaptor = ArgumentCaptor.forClass(Person.class);
verify(mock, times(2)).doSomething(peopleCaptor.capture());

List<Person> capturedPeople = peopleCaptor.getAllValues();
assertEquals("John", capturedPeople.get(0).getName());
assertEquals("Jane", capturedPeople.get(1).getName());
```

## Produced APIzation

[`APIzator5981825.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator5981825.java)

```java
package com.stackoverflow.api;

import com.sun.xml.internal.bind.v2.schemagen.xmlschema.List;
import org.ajoberstar.grgit.Person;
import org.mockito.ArgumentCaptor;

/**
 * Can Mockito capture arguments of a method called multiple times?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/5981825">https://stackoverflow.com/a/5981825</a>
 */
public class APIzator5981825 {

  public static void captureArgument() throws RuntimeException {
    ArgumentCaptor<Person> peopleCaptor = ArgumentCaptor.forClass(Person.class);
    verify(mock, times(2)).doSomething(peopleCaptor.capture());
    List<Person> capturedPeople = peopleCaptor.getAllValues();
    assertEquals("John", capturedPeople.get(0).getName());
    assertEquals("Jane", capturedPeople.get(1).getName());
  }
}

```