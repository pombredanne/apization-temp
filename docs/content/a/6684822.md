---
title: "[Q#6684665][A#6684822] Java Byte Array to String to Byte Array"
question_title: "Java Byte Array to String to Byte Array"
question_text: "I'm trying to understand a byte[] to string, string representation of byte[] to byte[] conversion... I convert my byte[] to a string to send, I then expect my web service (written in python) to echo the data straight back to the client. When I send the data from my Java application... Bytes to send.. Send (This is the result of Arrays.toString() which should be a string representation of my byte data, this data will be sent across the wire): On the python side, the python server returns a string to the caller (which I can see is the same as the string I sent to the server The server should return this data to the client, where it can be verified. The response my client receives (as a string) looks like I can't seem to figure out how to get the received string back into a  byte[] Whatever I seem to try I end up getting a byte array which looks as follows... or I can get a byte representation which is as follows: Both of these are different from my sent data... I'm sure Im missing something truly simple.... Any help?!"
answer_text: "You can't just take the returned string and construct a string from it... it's not a byte[] data type anymore, it's already a string; you need to parse it. For example : ** EDIT ** You get an hint of your problem in your question, where you say \"Whatever I seem to try I end up getting a byte array which looks as follows... [91, 45, ...\", because 91 is the byte value for [, so [91, 45, ... is the byte array of the string \"[-45, 1, 16, ...\" string. The method Arrays.toString() will return a String representation of the specified array; meaning that the returned value will not be a array anymore. For example : As you can see, s1 holds the string representation of the array b1, while s2 holds the string representation of the bytes contained in b1. Now, in your problem, your server returns a string similar to s1, therefore to get the array representation back, you need the opposite constructor method. If s2.getBytes() is the opposite of new String(b1), you need to find the opposite of Arrays.toString(b1), thus the code I pasted in the first snippet of this answer."
apization_code: "package com.stackoverflow.api;  import com.google.gwt.user.client.rpc.core.java.util.Arrays;  /**  * Java Byte Array to String to Byte Array  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/6684822\">https://stackoverflow.com/a/6684822</a>  */ public class APIzator6684822 {    public static String byteArray(String response, byte[] b1)     throws RuntimeException {     String[] byteValues = response       .substring(1, response.length() - 1)       .split(\",\");     byte[] bytes = new byte[byteValues.length];     for (int i = 0, len = bytes.length; i < len; i++) {}     String str = new String(bytes);     String s1 = Arrays.toString(b1);     String s2 = new String(b1);     // -> \"[97, 98, 99]\"     System.out.println(s1);     return s2;   } }"
---

https://stackoverflow.com/q/6684665

I&#x27;m trying to understand a byte[] to string, string representation of byte[] to byte[] conversion... I convert my byte[] to a string to send, I then expect my web service (written in python) to echo the data straight back to the client.
When I send the data from my Java application...
Bytes to send..
Send (This is the result of Arrays.toString() which should be a string representation of my byte data, this data will be sent across the wire):
On the python side, the python server returns a string to the caller (which I can see is the same as the string I sent to the server
The server should return this data to the client, where it can be verified.
The response my client receives (as a string) looks like
I can&#x27;t seem to figure out how to get the received string back into a 
byte[]
Whatever I seem to try I end up getting a byte array which looks as follows...
or I can get a byte representation which is as follows:
Both of these are different from my sent data... I&#x27;m sure Im missing something truly simple....
Any help?!


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
Arrays.toString(data.toByteArray())
[B@405217f8
[-47, 1, 16, 84, 2, 101, 110, 83, 111, 109, 101, 32, 78, 70, 67, 32, 68, 97, 116, 97]
[-47, 1, 16, 84, 2, 101, 110, 83, 111, 109, 101, 32, 78, 70, 67, 32, 68, 97, 116, 97]
[-47, 1, 16, 84, 2, 101, 110, 83, 111, 109, 101, 32, 78, 70, 67, 32, 68, 97, 116, 97]
[91, 45, 52, 55, 44, 32, 49, 44, 32, 49, 54, 44, 32, 56, 52, 44, 32, 50, 44, 32, 49, 48, 49, 44, 32, 49, 49, 48, 44, 32, 56, 51, 44, 32, 49, 49, 49, 44, 32, 49, 48, 57, 44, 32, 49, 48, 49, 44, 32, 51, 50, 44, 32, 55, 56, 44, 32, 55, 48, 44, 32, 54, 55, 44, 32, 51, 50, 44, 32, 54, 56, 44, 32, 57, 55, 44, 32, 49, 49, 54, 44, 32, 57, 55, 93]
B@2a80d889
```


## Original code snippet

https://stackoverflow.com/a/6684822

You can&#x27;t just take the returned string and construct a string from it... it&#x27;s not a byte[] data type anymore, it&#x27;s already a string; you need to parse it. For example :
** EDIT **
You get an hint of your problem in your question, where you say &quot;Whatever I seem to try I end up getting a byte array which looks as follows... [91, 45, ...&quot;, because 91 is the byte value for [, so [91, 45, ... is the byte array of the string &quot;[-45, 1, 16, ...&quot; string.
The method Arrays.toString() will return a String representation of the specified array; meaning that the returned value will not be a array anymore. For example :
As you can see, s1 holds the string representation of the array b1, while s2 holds the string representation of the bytes contained in b1.
Now, in your problem, your server returns a string similar to s1, therefore to get the array representation back, you need the opposite constructor method. If s2.getBytes() is the opposite of new String(b1), you need to find the opposite of Arrays.toString(b1), thus the code I pasted in the first snippet of this answer.

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
String response = "[-47, 1, 16, 84, 2, 101, 110, 83, 111, 109, 101, 32, 78, 70, 67, 32, 68, 97, 116, 97]";      // response from the Python script

String[] byteValues = response.substring(1, response.length() - 1).split(",");
byte[] bytes = new byte[byteValues.length];

for (int i=0, len=bytes.length; i<len; i++) {
   bytes[i] = Byte.parseByte(byteValues[i].trim());     
}

String str = new String(bytes);
byte[] b1 = new byte[] {97, 98, 99};

String s1 = Arrays.toString(b1);
String s2 = new String(b1);

System.out.println(s1);        // -> "[97, 98, 99]"
System.out.println(s2);        // -> "abc";
```

## Produced APIzation

[`APIzator6684822.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator6684822.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import com.google.gwt.user.client.rpc.core.java.util.Arrays;

/**
 * Java Byte Array to String to Byte Array
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/6684822">https://stackoverflow.com/a/6684822</a>
 */
public class APIzator6684822 {

  public static String byteArray(String response, byte[] b1)
    throws RuntimeException {
    String[] byteValues = response
      .substring(1, response.length() - 1)
      .split(",");
    byte[] bytes = new byte[byteValues.length];
    for (int i = 0, len = bytes.length; i < len; i++) {}
    String str = new String(bytes);
    String s1 = Arrays.toString(b1);
    String s2 = new String(b1);
    // -> "[97, 98, 99]"
    System.out.println(s1);
    return s2;
  }
}

```