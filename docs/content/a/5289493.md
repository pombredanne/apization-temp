---
title: "[Q#5289393][A#5289493] Casting variables in Java"
question_title: "Casting variables in Java"
question_text: "I wonder if anyone could tell me how casting works? I understand when I should do it, but not really how it works. On primitive data types I understand partially but when it comes to casting objects I don't understand how it works. How can a object with the type Object just suddenly be cast to, let's say, MyType (just an example) and then get all the methods?"
answer_text: "Casting in Java isn't magic, it's you telling the compiler that an Object of type A is actually of more specific type B, and thus gaining access to all the methods on B that you wouldn't have had otherwise. You're not performing any kind of magic or conversion when performing casting, you're essentially telling the compiler \"trust me, I know what I'm doing and I can guarantee you that this Object at this line is actually an <Insert cast type here>.\" For example: The above is fine, not magic and all well. The object being stored in o is actually a string, and therefore we can cast to a string without any problems. There's two ways this could go wrong. Firstly, if you're casting between two types in completely different inheritance hierarchies then the compiler will know you're being silly and stop you: Secondly, if they're in the same hierarchy but still an invalid cast then a ClassCastException will be thrown at runtime: This essentially means that you've violated the compiler's trust. You've told it you can guarantee the object is of a particular type, and it's not. Why do you need casting? Well, to start with you only need it when going from a more general type to a more specific type. For instance, Integer inherits from Number, so if you want to store an Integer as a Number then that's ok (since all Integers are Numbers.) However, if you want to go the other way round you need a cast - not all Numbers are Integers (as well as Integer we have Double, Float, Byte, Long, etc.) And even if there's just one subclass in your project or the JDK, someone could easily create another and distribute that, so you've no guarantee even if you think it's a single, obvious choice! Regarding use for casting, you still see the need for it in some libraries. Pre Java-5 it was used heavily in collections and various other classes, since all collections worked on adding objects and then casting the result that you got back out the collection. However, with the advent of generics much of the use for casting has gone away - it has been replaced by generics which provide a much safer alternative, without the potential for ClassCastExceptions (in fact if you use generics cleanly and it compiles with no warnings, you have a guarantee that you'll never get a ClassCastException.)"
apization_code: "package com.stackoverflow.api;  /**  * Casting variables in Java  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/5289493\">https://stackoverflow.com/a/5289493</a>  */ public class APIzator5289493 {    public static Double castVariable(Object o, String o)     throws RuntimeException {     String str = (String) o;     // Compilation fails here     Integer str = (Integer) o;     Number o = new Integer(5);     return (Double) o;   } }"
---

https://stackoverflow.com/q/5289393

I wonder if anyone could tell me how casting works? I understand when I should do it, but not really how it works. On primitive data types I understand partially but when it comes to casting objects I don&#x27;t understand how it works.
How can a object with the type Object just suddenly be cast to, let&#x27;s say, MyType (just an example) and then get all the methods?



## Original code snippet

https://stackoverflow.com/a/5289493

Casting in Java isn&#x27;t magic, it&#x27;s you telling the compiler that an Object of type A is actually of more specific type B, and thus gaining access to all the methods on B that you wouldn&#x27;t have had otherwise. You&#x27;re not performing any kind of magic or conversion when performing casting, you&#x27;re essentially telling the compiler &quot;trust me, I know what I&#x27;m doing and I can guarantee you that this Object at this line is actually an &lt;Insert cast type here&gt;.&quot; For example:
The above is fine, not magic and all well. The object being stored in o is actually a string, and therefore we can cast to a string without any problems.
There&#x27;s two ways this could go wrong. Firstly, if you&#x27;re casting between two types in completely different inheritance hierarchies then the compiler will know you&#x27;re being silly and stop you:
Secondly, if they&#x27;re in the same hierarchy but still an invalid cast then a ClassCastException will be thrown at runtime:
This essentially means that you&#x27;ve violated the compiler&#x27;s trust. You&#x27;ve told it you can guarantee the object is of a particular type, and it&#x27;s not.
Why do you need casting? Well, to start with you only need it when going from a more general type to a more specific type. For instance, Integer inherits from Number, so if you want to store an Integer as a Number then that&#x27;s ok (since all Integers are Numbers.) However, if you want to go the other way round you need a cast - not all Numbers are Integers (as well as Integer we have Double, Float, Byte, Long, etc.) And even if there&#x27;s just one subclass in your project or the JDK, someone could easily create another and distribute that, so you&#x27;ve no guarantee even if you think it&#x27;s a single, obvious choice!
Regarding use for casting, you still see the need for it in some libraries. Pre Java-5 it was used heavily in collections and various other classes, since all collections worked on adding objects and then casting the result that you got back out the collection. However, with the advent of generics much of the use for casting has gone away - it has been replaced by generics which provide a much safer alternative, without the potential for ClassCastExceptions (in fact if you use generics cleanly and it compiles with no warnings, you have a guarantee that you&#x27;ll never get a ClassCastException.)

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
Object o = "str";
String str = (String)o;
String o = "str";
Integer str = (Integer)o; //Compilation fails here
Number o = new Integer(5);
Double n = (Double)o; //ClassCastException thrown here
```

## Produced APIzation

[`APIzator5289493.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator5289493.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

/**
 * Casting variables in Java
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/5289493">https://stackoverflow.com/a/5289493</a>
 */
public class APIzator5289493 {

  public static Double castVariable(Object o, String o)
    throws RuntimeException {
    String str = (String) o;
    // Compilation fails here
    Integer str = (Integer) o;
    Number o = new Integer(5);
    return (Double) o;
  }
}

```