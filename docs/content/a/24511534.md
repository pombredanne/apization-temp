---
title: "[Q#24511052][A#24511534] How to convert an iterator to a stream?"
question_title: "How to convert an iterator to a stream?"
question_text: "I am looking for a concise way to convert an Iterator to a Stream or more specifically to \"view\" the iterator as a stream. For performance reason, I would like to avoid a copy of the iterator in a new list: Based on the some suggestions in the comments, I have also tried to use Stream.generate: However, I get a NoSuchElementException (since there is no invocation of hasNext) I have looked at StreamSupport and Collections but I didn't find anything."
answer_text: "One way is to create a Spliterator from the Iterator and use that as a basis for your stream: An alternative which is maybe more readable is to use an Iterable - and creating an Iterable from an Iterator is very easy with lambdas because Iterable is a functional interface:"
apization_code: "package com.stackoverflow.api;  import java.util.Arrays; import java.util.Iterator; import java.util.Spliterator; import java.util.Spliterators; import java.util.stream.Stream; import java.util.stream.StreamSupport;  /**  * How to convert an iterator to a stream?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/24511534\">https://stackoverflow.com/a/24511534</a>  */ public class APIzator24511534 {    public static Stream<String> convertIterator() throws RuntimeException {     Iterator<String> sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();     Stream<String> targetStream = StreamSupport.stream(       Spliterators.spliteratorUnknownSize(sourceIterator, Spliterator.ORDERED),       false     );     Iterator<String> sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();     Iterable<String> iterable = () -> sourceIterator;     return StreamSupport.stream(iterable.spliterator(), false);   } }"
---

https://stackoverflow.com/q/24511052

I am looking for a concise way to convert an Iterator to a Stream or more specifically to &quot;view&quot; the iterator as a stream.
For performance reason, I would like to avoid a copy of the iterator in a new list:
Based on the some suggestions in the comments, I have also tried to use Stream.generate:
However, I get a NoSuchElementException (since there is no invocation of hasNext)
I have looked at StreamSupport and Collections but I didn&#x27;t find anything.


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
Iterator<String> sourceIterator = Arrays.asList("A", "B", "C").iterator();
Collection<String> copyList = new ArrayList<String>();
sourceIterator.forEachRemaining(copyList::add);
Stream<String> targetStream = copyList.stream();
public static void main(String[] args) throws Exception {
    Iterator<String> sourceIterator = Arrays.asList("A", "B", "C").iterator();
    Stream<String> targetStream = Stream.generate(sourceIterator::next);
    targetStream.forEach(System.out::println);
}
Exception in thread "main" java.util.NoSuchElementException
    at java.util.AbstractList$Itr.next(AbstractList.java:364)
    at Main$$Lambda$1/1175962212.get(Unknown Source)
    at java.util.stream.StreamSpliterators$InfiniteSupplyingSpliterator$OfRef.tryAdvance(StreamSpliterators.java:1351)
    at java.util.Spliterator.forEachRemaining(Spliterator.java:326)
    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)
    at Main.main(Main.java:20)
```


## Original code snippet

https://stackoverflow.com/a/24511534

One way is to create a Spliterator from the Iterator and use that as a basis for your stream:
An alternative which is maybe more readable is to use an Iterable - and creating an Iterable from an Iterator is very easy with lambdas because Iterable is a functional interface:

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
Iterator<String> sourceIterator = Arrays.asList("A", "B", "C").iterator();
Stream<String> targetStream = StreamSupport.stream(
          Spliterators.spliteratorUnknownSize(sourceIterator, Spliterator.ORDERED),
          false);
Iterator<String> sourceIterator = Arrays.asList("A", "B", "C").iterator();

Iterable<String> iterable = () -> sourceIterator;
Stream<String> targetStream = StreamSupport.stream(iterable.spliterator(), false);
```

## Produced APIzation

[`APIzator24511534.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator24511534.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import java.util.Arrays;
import java.util.Iterator;
import java.util.Spliterator;
import java.util.Spliterators;
import java.util.stream.Stream;
import java.util.stream.StreamSupport;

/**
 * How to convert an iterator to a stream?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/24511534">https://stackoverflow.com/a/24511534</a>
 */
public class APIzator24511534 {

  public static Stream<String> convertIterator() throws RuntimeException {
    Iterator<String> sourceIterator = Arrays.asList("A", "B", "C").iterator();
    Stream<String> targetStream = StreamSupport.stream(
      Spliterators.spliteratorUnknownSize(sourceIterator, Spliterator.ORDERED),
      false
    );
    Iterator<String> sourceIterator = Arrays.asList("A", "B", "C").iterator();
    Iterable<String> iterable = () -> sourceIterator;
    return StreamSupport.stream(iterable.spliterator(), false);
  }
}

```