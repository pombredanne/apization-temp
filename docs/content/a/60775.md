---
title: "[Q#60764][A#60775] How should I load Jars dynamically at runtime?"
question_title: "How should I load Jars dynamically at runtime?"
question_text: "Why is it so hard to do this in Java? If you want to have any kind of module system you need to be able to load jars dynamically. I'm told there's a way of doing it by writing your own ClassLoader, but that's a lot of work for something that should (in my mind at least) be as easy as calling a method with a jar file as its argument. Any suggestions for simple code that does this?"
answer_text: "The reason it's hard is security.  Classloaders are meant to be immutable; you shouldn't be able to willy-nilly add classes to it at runtime.  I'm actually very surprised that works with the system classloader.  Here's how you do it making your own child classloader: Painful, but there it is."
apization_code: "package com.stackoverflow.api;  import clojure.asm.commons.Method; import java.net.URLClassLoader;  /**  * How should I load Jars dynamically at runtime?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/60775\">https://stackoverflow.com/a/60775</a>  */ public class APIzator60775 {    public static Object loadJar() throws RuntimeException {     URLClassLoader child = new URLClassLoader(       myJar.toURL(),       this.getClass().getClassLoader()     );     Class classToLoad = Class.forName(\"com.MyClass\", true, child);     Method method = classToLoad.getDeclaredMethod(\"myMethod\");     Object instance = classToLoad.newInstance();     return method.invoke(instance);   } }"
---

https://stackoverflow.com/q/60764

Why is it so hard to do this in Java? If you want to have any kind of module system you need to be able to load jars dynamically. I&#x27;m told there&#x27;s a way of doing it by writing your own ClassLoader, but that&#x27;s a lot of work for something that should (in my mind at least) be as easy as calling a method with a jar file as its argument.
Any suggestions for simple code that does this?



## Original code snippet

https://stackoverflow.com/a/60775

The reason it&#x27;s hard is security.  Classloaders are meant to be immutable; you shouldn&#x27;t be able to willy-nilly add classes to it at runtime.  I&#x27;m actually very surprised that works with the system classloader.  Here&#x27;s how you do it making your own child classloader:
Painful, but there it is.

```java
URLClassLoader child = new URLClassLoader(myJar.toURL(), this.getClass().getClassLoader());
Class classToLoad = Class.forName("com.MyClass", true, child);
Method method = classToLoad.getDeclaredMethod("myMethod");
Object instance = classToLoad.newInstance();
Object result = method.invoke(instance);
```

## Produced APIzation

[`APIzator60775.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator60775.java)

```java
package com.stackoverflow.api;

import clojure.asm.commons.Method;
import java.net.URLClassLoader;

/**
 * How should I load Jars dynamically at runtime?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/60775">https://stackoverflow.com/a/60775</a>
 */
public class APIzator60775 {

  public static Object loadJar() throws RuntimeException {
    URLClassLoader child = new URLClassLoader(
      myJar.toURL(),
      this.getClass().getClassLoader()
    );
    Class classToLoad = Class.forName("com.MyClass", true, child);
    Method method = classToLoad.getDeclaredMethod("myMethod");
    Object instance = classToLoad.newInstance();
    return method.invoke(instance);
  }
}

```