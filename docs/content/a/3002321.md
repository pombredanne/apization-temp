---
title: "[Q#2481455][A#3002321] Set margins in a LinearLayout programmatically"
question_title: "Set margins in a LinearLayout programmatically"
question_text: "I'm trying to use Java (not XML) to create a LinearLayout with buttons that fill the screen, and have margins. Here is code that works without margins: So that works fine, but how on earth do you give the buttons margins so there is space between them? I tried using LinearLayout.MarginLayoutParams, but that has no weight member so it's no good. And it doesn't work if you pass it lp in its constructor either. Is this impossible? Because it sure looks it, and it wouldn't be the first Android layout task you can only do in XML."
answer_text: "Here is a little code to accomplish it:"
apization_code: "package com.stackoverflow.api;  import android.widget.Button; import android.widget.LinearLayout;  /**  * Set margins in a LinearLayout programmatically  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/3002321\">https://stackoverflow.com/a/3002321</a>  */ public class APIzator3002321 {    public static void setMargin() throws RuntimeException {     LinearLayout ll = new LinearLayout(this);     ll.setOrientation(LinearLayout.VERTICAL);     LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(       LinearLayout.LayoutParams.MATCH_PARENT,       LinearLayout.LayoutParams.WRAP_CONTENT     );     layoutParams.setMargins(30, 20, 30, 0);     Button okButton = new Button(this);     okButton.setText(\"some text\");     ll.addView(okButton, layoutParams);   } }"
---

https://stackoverflow.com/q/2481455

I&#x27;m trying to use Java (not XML) to create a LinearLayout with buttons that fill the screen, and have margins. Here is code that works without margins:
So that works fine, but how on earth do you give the buttons margins so there is space between them? I tried using LinearLayout.MarginLayoutParams, but that has no weight member so it&#x27;s no good. And it doesn&#x27;t work if you pass it lp in its constructor either.
Is this impossible? Because it sure looks it, and it wouldn&#x27;t be the first Android layout task you can only do in XML.


```java
LinearLayout buttonsView = new LinearLayout(this);
buttonsView.setOrientation(LinearLayout.VERTICAL);
for (int r = 0; r < 6; ++r) {
    Button btn = new Button(this);
    btn.setText("A");

    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT); // Verbose!
    lp.weight = 1.0f; // This is critical. Doesn't work without it.
    buttonsView.addView(btn, lp);
}

ViewGroup.LayoutParams lp = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT);
setContentView(buttonsView, lp);
```


## Original code snippet

https://stackoverflow.com/a/3002321

Here is a little code to accomplish it:

```java
LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);

LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
     LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

layoutParams.setMargins(30, 20, 30, 0);

Button okButton=new Button(this);
okButton.setText("some text");
ll.addView(okButton, layoutParams);
```

## Produced APIzation

[`APIzator3002321.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator3002321.java)

```java
package com.stackoverflow.api;

import android.widget.Button;
import android.widget.LinearLayout;

/**
 * Set margins in a LinearLayout programmatically
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/3002321">https://stackoverflow.com/a/3002321</a>
 */
public class APIzator3002321 {

  public static void setMargin() throws RuntimeException {
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
      LinearLayout.LayoutParams.MATCH_PARENT,
      LinearLayout.LayoutParams.WRAP_CONTENT
    );
    layoutParams.setMargins(30, 20, 30, 0);
    Button okButton = new Button(this);
    okButton.setText("some text");
    ll.addView(okButton, layoutParams);
  }
}

```