---
title: "[Q#22093864][A#22094845] java.net.MalformedURLException: no protocol on URL based on a string modified with URLEncoder"
question_title: "java.net.MalformedURLException: no protocol on URL based on a string modified with URLEncoder"
question_text: "So I was attempting to use this String in a URL :- In this code: - But at this point I get the error: - I realised with a bit of googling this was due to the characters in the URL (guessing the &), so I then added in some code so it now looks like so: - However, when I try and run this I get an error when I try and create the URL, the error then reads: - It looks like I can't do the encoding until after I've created the URL else it replaces slashes and things which it shouldn't, but I can't see how I can create the URL with the string and then format it so its suitable for use.  I'm not particularly familiar with all this and was hoping someone might be able to point out to me what I'm missing to get string A into a suitably formatted URL to then use with the correct characters replaced? Any suggestions greatly appreciated!"
answer_text: "You need to encode your parameter's values before concatenating them to URL. Backslash \\ is special character which have to be escaped as %5C Escaping example: The result is http://host.com?param=param%5Cwith%5Cbackslash which is properly formatted url string."
apization_code: "package com.stackoverflow.api;  /**  * java.net.MalformedURLException: no protocol on URL based on a string modified with URLEncoder  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/22094845\">https://stackoverflow.com/a/22094845</a>  */ public class APIzator22094845 {    public static java.net.URL javanet(String paramValue)     throws RuntimeException {     String yourURLStr =       \"http://host.com?param=\" +       java.net.URLEncoder.encode(paramValue, \"UTF-8\");     return new java.net.URL(yourURLStr);   } }"
---

https://stackoverflow.com/q/22093864

So I was attempting to use this String in a URL :-
In this code: -
But at this point I get the error: -
I realised with a bit of googling this was due to the characters in the URL (guessing the &amp;), so I then added in some code so it now looks like so: -
However, when I try and run this I get an error when I try and create the URL, the error then reads: -
It looks like I can&#x27;t do the encoding until after I&#x27;ve created the URL else it replaces slashes and things which it shouldn&#x27;t, but I can&#x27;t see how I can create the URL with the string and then format it so its suitable for use.  I&#x27;m not particularly familiar with all this and was hoping someone might be able to point out to me what I&#x27;m missing to get string A into a suitably formatted URL to then use with the correct characters replaced?
Any suggestions greatly appreciated!


```java
http://site-test.collercapital.com/Meetings/IC/DownloadDocument?meetingId=c21c905c-8359-4bd6-b864-844709e05754&itemId=a4b724d1-282e-4b36-9d16-d619a807ba67&file=\\s604132shvw140\Test-Documents\c21c905c-8359-4bd6-b864-844709e05754_attachments\7e89c3cb-ce53-4a04-a9ee-1a584e157987\myDoc.pdf
String fileToDownloadLocation = //The above string
URL fileToDownload = new URL(fileToDownloadLocation);
HttpGet httpget = new HttpGet(fileToDownload.toURI());
java.net.URISyntaxException: Illegal character in query at index 169:Blahblahblah
String fileToDownloadLocation = //The above string
fileToDownloadLocation = URLEncoder.encode(fileToDownloadLocation, "UTF-8");
URL fileToDownload = new URL(fileToDownloadLocation);
HttpGet httpget = new HttpGet(fileToDownload.toURI());
java.net.MalformedURLException: no protocol: http%3A%2F%2Fsite-test.collercapital.com%2FMeetings%2FIC%2FDownloadDocument%3FmeetingId%3Dc21c905c-8359-4bd6-b864-844709e05754%26itemId%3Da4b724d1-282e-4b36-9d16-d619a807ba67%26file%3D%5C%5Cs604132shvw140%5CTest-Documents%5Cc21c905c-8359-4bd6-b864-844709e05754_attachments%5C7e89c3cb-ce53-4a04-a9ee-1a584e157987%myDoc.pdf
```


## Original code snippet

https://stackoverflow.com/a/22094845

You need to encode your parameter&#x27;s values before concatenating them to URL.
Backslash \ is special character which have to be escaped as %5C
Escaping example:
The result is http://host.com?param=param%5Cwith%5Cbackslash which is properly formatted url string.

```java
String paramValue = "param\\with\\backslash";
String yourURLStr = "http://host.com?param=" + java.net.URLEncoder.encode(paramValue, "UTF-8");
java.net.URL url = new java.net.URL(yourURLStr);
```

## Produced APIzation

[`APIzator22094845.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator22094845.java)

```java
package com.stackoverflow.api;

/**
 * java.net.MalformedURLException: no protocol on URL based on a string modified with URLEncoder
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/22094845">https://stackoverflow.com/a/22094845</a>
 */
public class APIzator22094845 {

  public static java.net.URL javanet(String paramValue)
    throws RuntimeException {
    String yourURLStr =
      "http://host.com?param=" +
      java.net.URLEncoder.encode(paramValue, "UTF-8");
    return new java.net.URL(yourURLStr);
  }
}

```