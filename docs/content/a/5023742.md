---
title: "[Q#5023718][A#5023742] How to retrieve raw post data from HttpServletRequest in java"
question_title: "How to retrieve raw post data from HttpServletRequest in java"
question_text: "I'm trying to get the post data in Java. Seems like it should be one of the simplest things to do right? I mean, HttpServletRequest.getParameter has to do it right? So how can you get the raw post data? I found HttpServletRequest get JSON POST data and used Kdeveloper's code to pull the post data from a request. It works, but theres a catch: I can only get that post data once. Heres the method I made from Kdeveloper's code: Previously I had closed the reader at the end of this method, but that caused exceptions when the method ran more than once on the same request. Without closing it, no exceptions happen, but the method returns an empty string. Honestly, there should just be an exposed req.getPostData() method - did no one think that would be useful? So how can I write this method such that it always returns the correct post data?"
answer_text: "The request body is available by HttpServletRequest#getInputStream() and #getReader(). Note that you can read it only once. The client ain't going to resend it multiple times. Calling getParameter() and so on will implicitly also read it. You've got to store the body somewhere and process yourself."
apization_code: "package com.stackoverflow.api;  import java.io.InputStream;  /**  * How to retrieve raw post data from HttpServletRequest in java  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/5023742\">https://stackoverflow.com/a/5023742</a>  */ public class APIzator5023742 {    public static void retrieveDatum() throws RuntimeException {     InputStream body = request.getInputStream();     // ...   } }"
---

https://stackoverflow.com/q/5023718

I&#x27;m trying to get the post data in Java. Seems like it should be one of the simplest things to do right? I mean, HttpServletRequest.getParameter has to do it right? So how can you get the raw post data?
I found HttpServletRequest get JSON POST data and used Kdeveloper&#x27;s code to pull the post data from a request. It works, but theres a catch: I can only get that post data once.
Heres the method I made from Kdeveloper&#x27;s code:
Previously I had closed the reader at the end of this method, but that caused exceptions when the method ran more than once on the same request. Without closing it, no exceptions happen, but the method returns an empty string.
Honestly, there should just be an exposed req.getPostData() method - did no one think that would be useful?
So how can I write this method such that it always returns the correct post data?


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
public static String getPostData(HttpServletRequest req) {
    StringBuilder sb = new StringBuilder();
    try {
        BufferedReader reader = req.getReader();
        reader.mark(10000);

        String line;
        do {
            line = reader.readLine();
            sb.append(line).append("\n");
        } while (line != null);
        reader.reset();
        // do NOT close the reader here, or you won't be able to get the post data twice
    } catch(IOException e) {
        logger.warn("getPostData couldn't.. get the post data", e);  // This has happened if the request's reader is closed    
    }

    return sb.toString();
}
```


## Original code snippet

https://stackoverflow.com/a/5023742

The request body is available by HttpServletRequest#getInputStream() and #getReader().
Note that you can read it only once. The client ain&#x27;t going to resend it multiple times. Calling getParameter() and so on will implicitly also read it. You&#x27;ve got to store the body somewhere and process yourself.

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
InputStream body = request.getInputStream();
// ...
```

## Produced APIzation

[`APIzator5023742.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator5023742.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import java.io.InputStream;

/**
 * How to retrieve raw post data from HttpServletRequest in java
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/5023742">https://stackoverflow.com/a/5023742</a>
 */
public class APIzator5023742 {

  public static void retrieveDatum() throws RuntimeException {
    InputStream body = request.getInputStream();
    // ...
  }
}

```