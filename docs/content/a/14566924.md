---
title: "[Q#14566596][A#14566924] Loop through all elements in XML using NodeList"
question_title: "Loop through all elements in XML using NodeList"
question_text: "I want to loop through all elements in a piece of XML printing each one.  My problem is that I keep getting a null pointer exception after the staff1 tag, i.e. john 465456433 gmail1 area1 city1 This my Java code to print all elements in an xml file: XML File: Expected Output:"
answer_text: "Iterate over all children and nl.item(i).getNodeType() == Node.ELEMENT_NODE is used to filter text nodes out. If there is nothing else in XML what remains are staff nodes. For each node under stuff (name, phone, email, area, city) el.getElementsByTagName(\"name\") will extract the \"name\" nodes under stuff, .item(0) will get you the first node and .getTextContent() will get the text content inside."
apization_code: "package com.stackoverflow.api;  import com.google.gwt.dom.client.Document; import com.google.gwt.dom.client.Element; import com.google.gwt.dom.client.Node; import com.google.gwt.dom.client.NodeList; import javax.xml.parsers.DocumentBuilder; import javax.xml.parsers.DocumentBuilderFactory;  /**  * Loop through all elements in XML using NodeList  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/14566924\">https://stackoverflow.com/a/14566924</a>  */ public class APIzator14566924 {    public static void loop() throws RuntimeException {     DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();     DocumentBuilder db = dbf.newDocumentBuilder();     Document dom = db.parse(\"file.xml\");     Element docEle = dom.getDocumentElement();     NodeList nl = docEle.getChildNodes();     if (nl != null) {       int length = nl.getLength();       for (int i = 0; i < length; i++) {         if (nl.item(i).getNodeType() == Node.ELEMENT_NODE) {           Element el = (Element) nl.item(i);           if (el.getNodeName().contains(\"staff\")) {             String name = el               .getElementsByTagName(\"name\")               .item(0)               .getTextContent();             String phone = el               .getElementsByTagName(\"phone\")               .item(0)               .getTextContent();             String email = el               .getElementsByTagName(\"email\")               .item(0)               .getTextContent();             String area = el               .getElementsByTagName(\"area\")               .item(0)               .getTextContent();             String city = el               .getElementsByTagName(\"city\")               .item(0)               .getTextContent();           }         }       }     }     el.getElementsByTagName(\"name\").item(0).getTextContent();   } }"
---

https://stackoverflow.com/q/14566596

I want to loop through all elements in a piece of XML printing each one.  My problem is that I keep getting a null pointer exception after the staff1 tag, i.e. john 465456433 gmail1 area1 city1
This my Java code to print all elements in an xml file:
XML File:
Expected Output:


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
File fXmlFile = new File("file.xml");
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(fXmlFile);

doc.getDocumentElement().normalize();

System.out.println("Root element :" + doc.getDocumentElement().getNodeName());

NodeList nList = doc.getElementsByTagName("*");

System.out.println("----------------------------");

Node n=null;
Element eElement=null;

for (int i = 0; i < nList.getLength(); i++) {           
  System.out.println(nList.getLength());     
  n= nList.item(i);                            
  System.out.println("\nCurrent Element :" + n.getNodeName());


  if (n.getNodeType() == Node.ELEMENT_NODE) {
    eElement = (Element) n.getChildNodes();
    System.out.println("\nCurrent Element :" + n.getNodeName());
    name = eElement.getElementsByTagName("name").item(i).getTextContent(); //here throws null pointer exception after printing staff1 tag
    phone = eElement.getElementsByTagName("phone").item(i).getTextContent();
    email = eElement.getElementsByTagName("email").item(i).getTextContent();
    area = eElement.getElementsByTagName("area").item(i).getTextContent();
    city = eElement.getElementsByTagName("city").item(i).getTextContent();
  }
  n.getNextSibling();
}
<?xml version="1.0"?>
<company>
  <staff1>
    <name>john</name>
    <phone>465456433</phone>
    <email>gmail1</email>
    <area>area1</area>
    <city>city1</city>
  </staff1>
  <staff2>
    <name>mary</name>
    <phone>4655556433</phone>
    <email>gmail2</email>
    <area>area2</area>
    <city>city2</city>
  </staff2>
  <staff3>
    <name>furvi</name>
    <phone>4655433</phone>
    <email>gmail3</email>
    <area>area3</area>
    <city>city3</city>
  </staff3>
</company>
john
465456433
gmail1
area1
city1
mary
4655556433
gmail2
area2
city2
furvi
4655433
gmail3
area3
city3
```


## Original code snippet

https://stackoverflow.com/a/14566924

Iterate over all children and nl.item(i).getNodeType() == Node.ELEMENT_NODE is used to filter text nodes out. If there is nothing else in XML what remains are staff nodes.
For each node under stuff (name, phone, email, area, city)
el.getElementsByTagName(&quot;name&quot;) will extract the &quot;name&quot; nodes under stuff,
.item(0) will get you the first node
and .getTextContent() will get the text content inside.

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document dom = db.parse("file.xml");
    Element docEle = dom.getDocumentElement();
    NodeList nl = docEle.getChildNodes();
    if (nl != null) {
        int length = nl.getLength();
        for (int i = 0; i < length; i++) {
            if (nl.item(i).getNodeType() == Node.ELEMENT_NODE) {
                Element el = (Element) nl.item(i);
                if (el.getNodeName().contains("staff")) {
                    String name = el.getElementsByTagName("name").item(0).getTextContent();
                    String phone = el.getElementsByTagName("phone").item(0).getTextContent();
                    String email = el.getElementsByTagName("email").item(0).getTextContent();
                    String area = el.getElementsByTagName("area").item(0).getTextContent();
                    String city = el.getElementsByTagName("city").item(0).getTextContent();
                }
            }
        }
    }
el.getElementsByTagName("name").item(0).getTextContent();
```

## Produced APIzation

[`APIzator14566924.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator14566924.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import com.google.gwt.dom.client.Document;
import com.google.gwt.dom.client.Element;
import com.google.gwt.dom.client.Node;
import com.google.gwt.dom.client.NodeList;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

/**
 * Loop through all elements in XML using NodeList
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/14566924">https://stackoverflow.com/a/14566924</a>
 */
public class APIzator14566924 {

  public static void loop() throws RuntimeException {
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document dom = db.parse("file.xml");
    Element docEle = dom.getDocumentElement();
    NodeList nl = docEle.getChildNodes();
    if (nl != null) {
      int length = nl.getLength();
      for (int i = 0; i < length; i++) {
        if (nl.item(i).getNodeType() == Node.ELEMENT_NODE) {
          Element el = (Element) nl.item(i);
          if (el.getNodeName().contains("staff")) {
            String name = el
              .getElementsByTagName("name")
              .item(0)
              .getTextContent();
            String phone = el
              .getElementsByTagName("phone")
              .item(0)
              .getTextContent();
            String email = el
              .getElementsByTagName("email")
              .item(0)
              .getTextContent();
            String area = el
              .getElementsByTagName("area")
              .item(0)
              .getTextContent();
            String city = el
              .getElementsByTagName("city")
              .item(0)
              .getTextContent();
          }
        }
      }
    }
    el.getElementsByTagName("name").item(0).getTextContent();
  }
}

```