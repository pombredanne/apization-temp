---
title: "[Q#5769717][A#5769756] How can I get an http response body as a string in Java?"
question_title: "How can I get an http response body as a string in Java?"
question_text: "I know there used to be a way to get it with apache commons as documented here: http://hc.apache.org/httpclient-legacy/apidocs/org/apache/commons/httpclient/HttpMethod.html and an example here: http://www.kodejava.org/examples/416.html but i believe this is deprecated. Is there any other way to make an http get request in java and get the response body as a string and not a stream?"
answer_text: "Every library I can think of returns a stream. You could use IOUtils.toString() from Apache Commons IO to read an InputStream into a String in one method call. E.g.: Update: I changed the example above to use the content encoding from the response if available. Otherwise it'll default to UTF-8 as a best guess, instead of using the local system default."
apization_code: "package com.stackoverflow.api;  import com.amazonaws.util.IOUtils; import java.io.InputStream; import java.net.URLConnection;  /**  * How can I get an http response body as a string in Java?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/5769756\">https://stackoverflow.com/a/5769756</a>  */ public class APIzator5769756 {    public static String getBody() throws RuntimeException {     URL url = new URL(\"http://www.example.com/\");     URLConnection con = url.openConnection();     InputStream in = con.getInputStream();     String encoding = con.getContentEncoding();     encoding = encoding == null ? \"UTF-8\" : encoding;     String body = IOUtils.toString(in, encoding);     return body;   } }"
---

https://stackoverflow.com/q/5769717

I know there used to be a way to get it with apache commons as documented here:
http://hc.apache.org/httpclient-legacy/apidocs/org/apache/commons/httpclient/HttpMethod.html
and an example here:
http://www.kodejava.org/examples/416.html
but i believe this is deprecated.
Is there any other way to make an http get request in java and get the response body as a string and not a stream?



## Original code snippet

https://stackoverflow.com/a/5769756

Every library I can think of returns a stream. You could use IOUtils.toString() from Apache Commons IO to read an InputStream into a String in one method call. E.g.:
Update: I changed the example above to use the content encoding from the response if available. Otherwise it&#x27;ll default to UTF-8 as a best guess, instead of using the local system default.

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
URL url = new URL("http://www.example.com/");
URLConnection con = url.openConnection();
InputStream in = con.getInputStream();
String encoding = con.getContentEncoding();
encoding = encoding == null ? "UTF-8" : encoding;
String body = IOUtils.toString(in, encoding);
System.out.println(body);
```

## Produced APIzation

[`APIzator5769756.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator5769756.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import com.amazonaws.util.IOUtils;
import java.io.InputStream;
import java.net.URLConnection;

/**
 * How can I get an http response body as a string in Java?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/5769756">https://stackoverflow.com/a/5769756</a>
 */
public class APIzator5769756 {

  public static String getBody() throws RuntimeException {
    URL url = new URL("http://www.example.com/");
    URLConnection con = url.openConnection();
    InputStream in = con.getInputStream();
    String encoding = con.getContentEncoding();
    encoding = encoding == null ? "UTF-8" : encoding;
    String body = IOUtils.toString(in, encoding);
    return body;
  }
}

```