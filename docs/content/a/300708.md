---
title: "[Q#300491][A#300708] How to get distinct results in hibernate with joins and row-based limiting (paging)?"
question_title: "How to get distinct results in hibernate with joins and row-based limiting (paging)?"
question_text: "I'm trying to implement paging using row-based limiting (for example: setFirstResult(5) and setMaxResults(10)) on a Hibernate Criteria query that has joins to other tables. Understandably, data is getting cut off randomly; and the reason for that is explained here. As a solution, the page suggests using a \"second sql select\" instead of a join. How can I convert my existing criteria query (which has joins using createAlias()) to use a nested select instead?"
answer_text: "You can achieve the desired result by requesting a list of distinct ids instead of a list of distinct hydrated objects. Simply add this to your criteria: Now you'll get the correct number of results according to your row-based limiting. The reason this works is because the projection will perform the distinctness check as part of the sql query, instead of what a ResultTransformer does which is to filter the results for distinctness after the sql query has been performed. Worth noting is that instead of getting a list of objects, you will now get a list of ids, which you can use to hydrate objects from hibernate later."
apization_code: "package com.stackoverflow.api;  import com.mongodb.client.model.Projections;  /**  * How to get distinct results in hibernate with joins and row-based limiting (paging)?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/300708\">https://stackoverflow.com/a/300708</a>  */ public class APIzator300708 {    public static void getResult() throws RuntimeException {     criteria.setProjection(Projections.distinct(Projections.property(\"id\")));   } }"
---

https://stackoverflow.com/q/300491

I&#x27;m trying to implement paging using row-based limiting (for example: setFirstResult(5) and setMaxResults(10)) on a Hibernate Criteria query that has joins to other tables.
Understandably, data is getting cut off randomly; and the reason for that is explained here.
As a solution, the page suggests using a &quot;second sql select&quot; instead of a join.
How can I convert my existing criteria query (which has joins using createAlias()) to use a nested select instead?



## Original code snippet

https://stackoverflow.com/a/300708

You can achieve the desired result by requesting a list of distinct ids instead of a list of distinct hydrated objects.
Simply add this to your criteria:
Now you&#x27;ll get the correct number of results according to your row-based limiting. The reason this works is because the projection will perform the distinctness check as part of the sql query, instead of what a ResultTransformer does which is to filter the results for distinctness after the sql query has been performed.
Worth noting is that instead of getting a list of objects, you will now get a list of ids, which you can use to hydrate objects from hibernate later.

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
criteria.setProjection(Projections.distinct(Projections.property("id")));
```

## Produced APIzation

[`APIzator300708.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator300708.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import com.mongodb.client.model.Projections;

/**
 * How to get distinct results in hibernate with joins and row-based limiting (paging)?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/300708">https://stackoverflow.com/a/300708</a>
 */
public class APIzator300708 {

  public static void getResult() throws RuntimeException {
    criteria.setProjection(Projections.distinct(Projections.property("id")));
  }
}

```