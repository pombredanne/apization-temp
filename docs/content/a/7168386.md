---
title: "[Q#7161638][A#7168386] How do I use a custom Serializer with Jackson?"
question_title: "How do I use a custom Serializer with Jackson?"
question_text: "I have two Java classes that I want to serialize to JSON using Jackson: I want to serialize an Item to this JSON: with User serialized to only include the id. I will also be able to serilize all user objects to JSON like: So I guess that I need to write a custom serializer for Item and tried with this: I serialize the JSON with this code from Jackson How-to: Custom Serializers: But I get this error: How can I use a custom Serializer with Jackson? This is how I would do it with Gson: But I need to do it with Jackson now, since Gson doesn't have support for interfaces."
answer_text: "As mentioned, @JsonValue is a good way. But if you don't mind a custom serializer, there's no need to write one for Item but rather one for User -- if so, it'd be as simple as: Yet another possibility is to implement JsonSerializable, in which case no registration is needed. As to error; that is weird -- you probably want to upgrade to a later version. But it is also safer to extend org.codehaus.jackson.map.ser.SerializerBase as it will have standard implementations of non-essential methods (i.e. everything but actual serialization call)."
apization_code: "package com.stackoverflow.api;  import clojure.asm.Item; import com.fasterxml.jackson.core.JsonGenerator; import com.fasterxml.jackson.core.JsonProcessingException; import com.fasterxml.jackson.databind.SerializerProvider; import java.io.IOException;  /**  * How do I use a custom Serializer with Jackson?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/7168386\">https://stackoverflow.com/a/7168386</a>  */ public class APIzator7168386 {    public static void serialize(     Item value,     JsonGenerator jgen,     SerializerProvider provider   )     throws IOException, JsonProcessingException {     jgen.writeNumber(id);   } }"
---

https://stackoverflow.com/q/7161638

I have two Java classes that I want to serialize to JSON using Jackson:
I want to serialize an Item to this JSON:
with User serialized to only include the id. I will also be able to serilize all user objects to JSON like:
So I guess that I need to write a custom serializer for Item and tried with this:
I serialize the JSON with this code from Jackson How-to: Custom Serializers:
But I get this error:
How can I use a custom Serializer with Jackson?
This is how I would do it with Gson:
But I need to do it with Jackson now, since Gson doesn&#x27;t have support for interfaces.


```java
public class User {
    public final int id;
    public final String name;

    public User(int id, String name) {
        this.id = id;
        this.name = name;
    }
}

public class Item {
    public final int id;
    public final String itemNr;
    public final User createdBy;

    public Item(int id, String itemNr, User createdBy) {
        this.id = id;
        this.itemNr = itemNr;
        this.createdBy = createdBy;
    }
}
{"id":7, "itemNr":"TEST", "createdBy":3}
{"id":3, "name": "Jonas", "email": "jonas@example.com"}
public class ItemSerializer extends JsonSerializer<Item> {

@Override
public void serialize(Item value, JsonGenerator jgen,
        SerializerProvider provider) throws IOException,
        JsonProcessingException {
    jgen.writeStartObject();
    jgen.writeNumberField("id", value.id);
    jgen.writeNumberField("itemNr", value.itemNr);
    jgen.writeNumberField("createdBy", value.user.id);
    jgen.writeEndObject();
}

}
ObjectMapper mapper = new ObjectMapper();
SimpleModule simpleModule = new SimpleModule("SimpleModule", 
                                              new Version(1,0,0,null));
simpleModule.addSerializer(new ItemSerializer());
mapper.registerModule(simpleModule);
StringWriter writer = new StringWriter();
try {
    mapper.writeValue(writer, myItem);
} catch (JsonGenerationException e) {
    e.printStackTrace();
} catch (JsonMappingException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
Exception in thread "main" java.lang.IllegalArgumentException: JsonSerializer of type com.example.ItemSerializer does not define valid handledType() (use alternative registration method?)
    at org.codehaus.jackson.map.module.SimpleSerializers.addSerializer(SimpleSerializers.java:62)
    at org.codehaus.jackson.map.module.SimpleModule.addSerializer(SimpleModule.java:54)
    at com.example.JsonTest.main(JsonTest.java:54)
public class UserAdapter implements JsonSerializer<User> {

    @Override 
    public JsonElement serialize(User src, java.lang.reflect.Type typeOfSrc,
            JsonSerializationContext context) {
        return new JsonPrimitive(src.id);
    }
}

    GsonBuilder builder = new GsonBuilder();
    builder.registerTypeAdapter(User.class, new UserAdapter());
    Gson gson = builder.create();
    String json = gson.toJson(myItem);
    System.out.println("JSON: "+json);
```


## Original code snippet

https://stackoverflow.com/a/7168386

As mentioned, @JsonValue is a good way. But if you don&#x27;t mind a custom serializer, there&#x27;s no need to write one for Item but rather one for User -- if so, it&#x27;d be as simple as:
Yet another possibility is to implement JsonSerializable, in which case no registration is needed.
As to error; that is weird -- you probably want to upgrade to a later version. But it is also safer to extend org.codehaus.jackson.map.ser.SerializerBase as it will have standard implementations of non-essential methods (i.e. everything but actual serialization call).

```java
public void serialize(Item value, JsonGenerator jgen,
    SerializerProvider provider) throws IOException,
    JsonProcessingException {
  jgen.writeNumber(id);
}
```

## Produced APIzation

[`APIzator7168386.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator7168386.java)

```java
package com.stackoverflow.api;

import clojure.asm.Item;
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.SerializerProvider;
import java.io.IOException;

/**
 * How do I use a custom Serializer with Jackson?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/7168386">https://stackoverflow.com/a/7168386</a>
 */
public class APIzator7168386 {

  public static void serialize(
    Item value,
    JsonGenerator jgen,
    SerializerProvider provider
  )
    throws IOException, JsonProcessingException {
    jgen.writeNumber(id);
  }
}

```