---
title: "[Q#11177348][A#11177393] How to add element in List while iterating in java?"
question_title: "How to add element in List while iterating in java?"
question_text: "Say I have a List like: While iterating through this list I want to add an element at the end of the list. But I don't want to iterate through the newly added elements that is I want to iterate up to the initial size of the list. Can anybody suggest me how can I do this?"
answer_text: "You can't use a foreach statement for that. The foreach is using internally an iterator: The iterators returned by this class's iterator and listIterator   methods are fail-fast: if the list is structurally modified at any   time after the iterator is created, in any way except through the   iterator's own remove or add methods, the iterator will throw a   ConcurrentModificationException. (From ArrayList javadoc) In the foreach statement you don't have access to the iterator's add method and in any case that's still not the type of add that you want because it does not append at the end. You'll need to traverse the list manually: Note that this is only efficient for Lists that allow random access. You can check for this feature by checking whether the list implements the RandomAccess marker interface. An ArrayList has random access. A linked list does not."
apization_code: "package com.stackoverflow.api;  import java.util.concurrent.LinkedTransferQueue;  /**  * How to add element in List while iterating in java?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/11177393\">https://stackoverflow.com/a/11177393</a>  */ public class APIzator11177393 {    public static void addElement(LinkedTransferQueue list)     throws RuntimeException {     int listSize = list.size();     for (int i = 0; i < listSize; ++i) list.add(\"whatever\");   } }"
---

https://stackoverflow.com/q/11177348

Say I have a List like:
While iterating through this list I want to add an element at the end of the list. But I don&#x27;t want to iterate through the newly added elements that is I want to iterate up to the initial size of the list.
Can anybody suggest me how can I do this?


```java
List<String> list = new ArrayList<>();
list.add("a");
list.add("h");
list.add("f");
list.add("s");
for (String s : list)
     /* Here I want to add new element if needed while iterating */
```


## Original code snippet

https://stackoverflow.com/a/11177393

You can&#x27;t use a foreach statement for that. The foreach is using internally an iterator:
The iterators returned by this class&#x27;s iterator and listIterator
  methods are fail-fast: if the list is structurally modified at any
  time after the iterator is created, in any way except through the
  iterator&#x27;s own remove or add methods, the iterator will throw a
  ConcurrentModificationException.
(From ArrayList javadoc)
In the foreach statement you don&#x27;t have access to the iterator&#x27;s add method and in any case that&#x27;s still not the type of add that you want because it does not append at the end. You&#x27;ll need to traverse the list manually:
Note that this is only efficient for Lists that allow random access. You can check for this feature by checking whether the list implements the RandomAccess marker interface. An ArrayList has random access. A linked list does not.

```java
int listSize = list.size();
for(int i = 0; i < listSize; ++i)
  list.add("whatever");
```

## Produced APIzation

[`APIzator11177393.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator11177393.java)

```java
package com.stackoverflow.api;

import java.util.concurrent.LinkedTransferQueue;

/**
 * How to add element in List while iterating in java?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/11177393">https://stackoverflow.com/a/11177393</a>
 */
public class APIzator11177393 {

  public static void addElement(LinkedTransferQueue list)
    throws RuntimeException {
    int listSize = list.size();
    for (int i = 0; i < listSize; ++i) list.add("whatever");
  }
}

```