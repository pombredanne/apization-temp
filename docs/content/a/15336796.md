---
title: "[Q#15336477][A#15336796] Deprecated Java HttpClient - How hard can it be?"
question_title: "Deprecated Java HttpClient - How hard can it be?"
question_text: "All I'm trying to do is download some JSON and deserialize it into an object. I haven't got as far as downloading the JSON yet. Almost every single HttpClient example I can find, including those on the apache site looks something like... However, Netbeans tells me that DefaultHttpClient is deprecated. I've tried googling for DefaultHttpClient deprecated and as many other variations as I can think of and can't find any useful results, so I'm obviously missing something. What is the correct Java7 way to download the contents of a webpage? Is there really no decent Http Client as part of the language? I find that hard to believe. My Maven dependency for this is..."
answer_text: "Relevant imports: Usage: EDIT (after Jules' suggestion): As the build() method returns a CloseableHttpClient which is-a AutoClosable, you can place the declaration in a try-with-resources  statement (Java 7+):"
apization_code: "package com.stackoverflow.api;  import java.io.IOException; import org.apache.http.client.HttpClient; import org.apache.http.impl.client.CloseableHttpClient; import org.apache.http.impl.client.HttpClientBuilder;  /**  * Deprecated Java HttpClient - How hard can it be?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/15336796\">https://stackoverflow.com/a/15336796</a>  */ public class APIzator15336796 {    public static void be() throws RuntimeException {     HttpClient httpClient = HttpClientBuilder.create().build();     try (CloseableHttpClient httpClient = HttpClientBuilder.create().build()) {       // use httpClient (no need to close it explicitly)     } catch (IOException e) {       // handle     }   } }"
---

https://stackoverflow.com/q/15336477

All I&#x27;m trying to do is download some JSON and deserialize it into an object. I haven&#x27;t got as far as downloading the JSON yet.
Almost every single HttpClient example I can find, including those on the apache site looks something like...
However, Netbeans tells me that DefaultHttpClient is deprecated. I&#x27;ve tried googling for DefaultHttpClient deprecated and as many other variations as I can think of and can&#x27;t find any useful results, so I&#x27;m obviously missing something.
What is the correct Java7 way to download the contents of a webpage? Is there really no decent Http Client as part of the language? I find that hard to believe.
My Maven dependency for this is...


```java
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;

public void blah() {
    HttpClient client = new DefaultHttpClient();
    ...
}
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>LATEST</version>
    <type>jar</type>
</dependency>
```


## Original code snippet

https://stackoverflow.com/a/15336796

Relevant imports:
Usage:
EDIT (after Jules&#x27; suggestion):
As the build() method returns a CloseableHttpClient which is-a AutoClosable, you can place the declaration in a try-with-resources  statement (Java 7+):

```java
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClientBuilder;
import java.io.IOException;
HttpClient httpClient = HttpClientBuilder.create().build();
try (CloseableHttpClient httpClient = HttpClientBuilder.create().build()) {

    // use httpClient (no need to close it explicitly)

} catch (IOException e) {

    // handle

}
```

## Produced APIzation

[`APIzator15336796.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator15336796.java)

```java
package com.stackoverflow.api;

import java.io.IOException;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClientBuilder;

/**
 * Deprecated Java HttpClient - How hard can it be?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/15336796">https://stackoverflow.com/a/15336796</a>
 */
public class APIzator15336796 {

  public static void be() throws RuntimeException {
    HttpClient httpClient = HttpClientBuilder.create().build();
    try (CloseableHttpClient httpClient = HttpClientBuilder.create().build()) {
      // use httpClient (no need to close it explicitly)
    } catch (IOException e) {
      // handle
    }
  }
}

```