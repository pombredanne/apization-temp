---
title: "[Q#693997][A#1565243] How to set HttpResponse timeout for Android in Java"
question_title: "How to set HttpResponse timeout for Android in Java"
question_text: "I have created the following function for checking the connection status: When I shut down the server for testing the execution waits a long time at line Does anyone know how to set the timeout in order to avoid waiting too long? Thanks!"
answer_text: "In my example two timeouts are set. The connection timeout throws \"java.net.SocketTimeoutException: Socket is not connected\" and the socket timeout \"java.net.SocketTimeoutException: The operation timed out\". If you want to set the Parameters of any existing HTTPClient (e.g. DefaultHttpClient or AndroidHttpClient) you can use the function setParams()."
apization_code: "package com.stackoverflow.api;  /**  * How to set HttpResponse timeout for Android in Java  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/1565243\">https://stackoverflow.com/a/1565243</a>  */ public class APIzator1565243 {    public static void setTimeout() throws RuntimeException {     httpClient.setParams(httpParameters);   } }"
---

https://stackoverflow.com/q/693997

I have created the following function for checking the connection status:
When I shut down the server for testing the execution waits a long time at line
Does anyone know how to set the timeout in order to avoid waiting too long?
Thanks!


```java
private void checkConnectionStatus() {
    HttpClient httpClient = new DefaultHttpClient();

    try {
      String url = "http://xxx.xxx.xxx.xxx:8000/GaitLink/"
                   + strSessionString + "/ConnectionStatus";
      Log.d("phobos", "performing get " + url);
      HttpGet method = new HttpGet(new URI(url));
      HttpResponse response = httpClient.execute(method);

      if (response != null) {
        String result = getResponse(response.getEntity());
        ...
HttpResponse response = httpClient.execute(method);
```


## Original code snippet

https://stackoverflow.com/a/1565243

In my example two timeouts are set. The connection timeout throws &quot;java.net.SocketTimeoutException: Socket is not connected&quot; and the socket timeout &quot;java.net.SocketTimeoutException: The operation timed out&quot;.
If you want to set the Parameters of any existing HTTPClient (e.g. DefaultHttpClient or AndroidHttpClient) you can use the function setParams().

```java
HttpGet httpGet = new HttpGet(url);
HttpParams httpParameters = new BasicHttpParams();
// Set the timeout in milliseconds until a connection is established.
// The default value is zero, that means the timeout is not used. 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// Set the default socket timeout (SO_TIMEOUT) 
// in milliseconds which is the timeout for waiting for data.
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpResponse response = httpClient.execute(httpGet);
httpClient.setParams(httpParameters);
```

## Produced APIzation

[`APIzator1565243.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator1565243.java)

```java
package com.stackoverflow.api;

/**
 * How to set HttpResponse timeout for Android in Java
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/1565243">https://stackoverflow.com/a/1565243</a>
 */
public class APIzator1565243 {

  public static void setTimeout() throws RuntimeException {
    httpClient.setParams(httpParameters);
  }
}

```