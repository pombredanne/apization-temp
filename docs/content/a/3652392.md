---
title: "[Q#3651725][A#3652392] Match multiline text using regular expression"
question_title: "Match multiline text using regular expression"
question_text: "I am trying to match a multi line text using java. When I use the Pattern class with the Pattern.MULTILINE modifier, I am able to match, but I am not able to do so with (?m). The same pattern with (?m) and using String.matches does not seem to work. I am sure I am missing something, but no idea what. Am not very good at regular expressions. This is what I tried"
answer_text: "First, you're using the modifiers under an incorrect assumption. Pattern.MULTILINE or (?m) tells Java to accept the anchors ^ and $ to match at the start and end of each line (otherwise they only match at the start/end of the entire string). Pattern.DOTALL or (?s) tells Java to allow the dot to match newline characters, too. Second, in your case, the regex fails because you're using the matches() method which expects the regex to match the entire string - which of course doesn't work since there are some characters left after (\\\\W)*(\\\\S)* have matched. So if you're simply looking for a string that starts with User Comments:, use the regex with the Pattern.DOTALL option: ResultString will then contain the text after User Comments:"
apization_code: "package com.stackoverflow.api;  import jxl.write.Pattern; import org.quartz.Matcher;  /**  * Match multiline text using regular expression  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/3652392\">https://stackoverflow.com/a/3652392</a>  */ public class APIzator3652392 {    public static void text() throws RuntimeException {     Pattern regex = Pattern.compile(       \"^\\\\s*User Comments:\\\\s+(.*)\",       Pattern.DOTALL     );     Matcher regexMatcher = regex.matcher(subjectString);     if (regexMatcher.find()) {       ResultString = regexMatcher.group(1);     }   } }"
---

https://stackoverflow.com/q/3651725

I am trying to match a multi line text using java. When I use the Pattern class with the Pattern.MULTILINE modifier, I am able to match, but I am not able to do so with (?m).
The same pattern with (?m) and using String.matches does not seem to work.
I am sure I am missing something, but no idea what. Am not very good at regular expressions.
This is what I tried


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
String test = "User Comments: This is \t a\ta \n test \n\n message \n";

String pattern1 = "User Comments: (\\W)*(\\S)*";
Pattern p = Pattern.compile(pattern1, Pattern.MULTILINE);
System.out.println(p.matcher(test).find());  //true

String pattern2 = "(?m)User Comments: (\\W)*(\\S)*";
System.out.println(test.matches(pattern2));  //false - why?
```


## Original code snippet

https://stackoverflow.com/a/3652392

First, you&#x27;re using the modifiers under an incorrect assumption.
Pattern.MULTILINE or (?m) tells Java to accept the anchors ^ and $ to match at the start and end of each line (otherwise they only match at the start/end of the entire string).
Pattern.DOTALL or (?s) tells Java to allow the dot to match newline characters, too.
Second, in your case, the regex fails because you&#x27;re using the matches() method which expects the regex to match the entire string - which of course doesn&#x27;t work since there are some characters left after (\\W)*(\\S)* have matched.
So if you&#x27;re simply looking for a string that starts with User Comments:, use the regex
with the Pattern.DOTALL option:
ResultString will then contain the text after User Comments:

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
^\s*User Comments:\s*(.*)
Pattern regex = Pattern.compile("^\\s*User Comments:\\s+(.*)", Pattern.DOTALL);
Matcher regexMatcher = regex.matcher(subjectString);
if (regexMatcher.find()) {
    ResultString = regexMatcher.group(1);
}
```

## Produced APIzation

[`APIzator3652392.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator3652392.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import jxl.write.Pattern;
import org.quartz.Matcher;

/**
 * Match multiline text using regular expression
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/3652392">https://stackoverflow.com/a/3652392</a>
 */
public class APIzator3652392 {

  public static void text() throws RuntimeException {
    Pattern regex = Pattern.compile(
      "^\\s*User Comments:\\s+(.*)",
      Pattern.DOTALL
    );
    Matcher regexMatcher = regex.matcher(subjectString);
    if (regexMatcher.find()) {
      ResultString = regexMatcher.group(1);
    }
  }
}

```