---
title: "[Q#8854106][A#8854437] Java String encoding (UTF-8)"
question_title: "Java String encoding (UTF-8)"
question_text: "I have come across this line of legacy code, which I am trying to figure out: As far as I can understand, it is encoding & decoding using the same charSet. How is this different from the following? Is there any scenario in which the two lines will have different outputs? p.s.: Just to clarify, yes I am aware of the excellent article on encoding by Joel Spolsky !"
answer_text: "This could be complicated way of doing This shortens the String is the underlying char[] used is much longer. However more specifically it will be checking that every character can be UTF-8 encoded. There are some \"characters\" you can have in a String which cannot be encoded and these would be turned into ? Any character between \\uD800 and \\uDFFF cannot be encoded and will be turned into '?' prints"
apization_code: "package com.stackoverflow.api;  /**  * Java String encoding (UTF-8)  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/8854437\">https://stackoverflow.com/a/8854437</a>  */ public class APIzator8854437 {    public static String encoding(String oldString) throws RuntimeException {     String newString = new String(oldString);     String newString = new String(oldString.getBytes(\"UTF-8\"), \"UTF-8\");     return newString.equals(oldString);   } }"
---

https://stackoverflow.com/q/8854106

I have come across this line of legacy code, which I am trying to figure out:
As far as I can understand, it is encoding &amp; decoding using the same charSet.
How is this different from the following?
Is there any scenario in which the two lines will have different outputs?
p.s.: Just to clarify, yes I am aware of the excellent article on encoding by Joel Spolsky !


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
String newString = new String(oldString.getBytes("UTF-8"), "UTF-8"));
String newString = oldString;
```


## Original code snippet

https://stackoverflow.com/a/8854437

This could be complicated way of doing
This shortens the String is the underlying char[] used is much longer.
However more specifically it will be checking that every character can be UTF-8 encoded.
There are some &quot;characters&quot; you can have in a String which cannot be encoded and these would be turned into ?
Any character between \uD800 and \uDFFF cannot be encoded and will be turned into &#x27;?&#x27;
prints

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
String newString = new String(oldString);
String oldString = "\uD800";
String newString = new String(oldString.getBytes("UTF-8"), "UTF-8");
System.out.println(newString.equals(oldString));
false
```

## Produced APIzation

[`APIzator8854437.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator8854437.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

/**
 * Java String encoding (UTF-8)
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/8854437">https://stackoverflow.com/a/8854437</a>
 */
public class APIzator8854437 {

  public static String encoding(String oldString) throws RuntimeException {
    String newString = new String(oldString);
    String newString = new String(oldString.getBytes("UTF-8"), "UTF-8");
    return newString.equals(oldString);
  }
}

```