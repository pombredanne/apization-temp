---
title: "[Q#953527][A#953592] Java substring: 'string index out of range'"
question_title: "Java substring: 'string index out of range'"
question_text: "I'm guessing I'm getting this error because the string is trying to substring a null value. But wouldn't the \".length() > 0\" part eliminate that issue? Here is the Java snippet: I got this error:"
answer_text: "I\"m guessing i'm getting this error   because the string is trying to   substring a Null value. But wouldn't   the \".length() > 0\" part eliminate   that issue? No, calling itemdescription.length() when itemdescription is null would not generate a StringIndexOutOfBoundsException, but rather a NullPointerException since you would essentially be trying to call a method on null. As others have indicated, StringIndexOutOfBoundsException indicates that itemdescription is not at least 38 characters long.  You probably want to handle both conditions (I assuming you want to truncate): Might be a good place for a utility function if you do that a lot..."
apization_code: "package com.stackoverflow.api;  /**  * Java substring: 'string index out of range'  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/953592\">https://stackoverflow.com/a/953592</a>  */ public class APIzator953592 {    public static void substre() throws RuntimeException {     final String value;     if (itemdescription == null || itemdescription.length() <= 0) {       value = \"_\";     } else if (itemdescription.length() <= 38) {       value = itemdescription;     } else {       value = itemdescription.substring(0, 38);     }     pstmt2.setString(3, value);   } }"
---

https://stackoverflow.com/q/953527

I&#x27;m guessing I&#x27;m getting this error because the string is trying to substring a null value. But wouldn&#x27;t the &quot;.length() &gt; 0&quot; part eliminate that issue?
Here is the Java snippet:
I got this error:


```java
if (itemdescription.length() > 0) {
    pstmt2.setString(3, itemdescription.substring(0,38));
} 
else { 
    pstmt2.setString(3, "_");
}
java.lang.StringIndexOutOfBoundsException: String index out of range: 38
    at java.lang.String.substring(Unknown Source)
    at MASInsert2.itemimport(MASInsert2.java:192)
    at MASInsert2.processRequest(MASInsert2.java:125)
    at MASInsert2.doGet(MASInsert2.java:219)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:627)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:835)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:640)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
    at java.lang.Thread.run(Unknown Source)
```


## Original code snippet

https://stackoverflow.com/a/953592

I&quot;m guessing i&#x27;m getting this error
  because the string is trying to
  substring a Null value. But wouldn&#x27;t
  the &quot;.length() &gt; 0&quot; part eliminate
  that issue?
No, calling itemdescription.length() when itemdescription is null would not generate a StringIndexOutOfBoundsException, but rather a NullPointerException since you would essentially be trying to call a method on null.
As others have indicated, StringIndexOutOfBoundsException indicates that itemdescription is not at least 38 characters long.  You probably want to handle both conditions (I assuming you want to truncate):
Might be a good place for a utility function if you do that a lot...

```java
final String value;
if (itemdescription == null || itemdescription.length() <= 0) {
    value = "_";
} else if (itemdescription.length() <= 38) {
    value = itemdescription;
} else { 
    value = itemdescription.substring(0, 38);
}
pstmt2.setString(3, value);
```

## Produced APIzation

[`APIzator953592.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator953592.java)

```java
package com.stackoverflow.api;

/**
 * Java substring: 'string index out of range'
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/953592">https://stackoverflow.com/a/953592</a>
 */
public class APIzator953592 {

  public static void substre() throws RuntimeException {
    final String value;
    if (itemdescription == null || itemdescription.length() <= 0) {
      value = "_";
    } else if (itemdescription.length() <= 38) {
      value = itemdescription;
    } else {
      value = itemdescription.substring(0, 38);
    }
    pstmt2.setString(3, value);
  }
}

```