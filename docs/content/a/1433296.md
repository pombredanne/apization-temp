---
title: "[Q#1432961][A#1433296] How do I make HttpURLConnection use a proxy?"
question_title: "How do I make HttpURLConnection use a proxy?"
question_text: "If I do this... it prints The problem is, I am behind a proxy. Where does the JVM get its proxy information from on Windows? How do I set this up? All my other apps seem perfectly happy with my proxy."
answer_text: "Since java 1.5 you can also pass a java.net.Proxy instance to the openConnection(proxy) method: If your proxy requires authentication it will give you response 407. In this case you'll need the following code:"
apization_code: "package com.stackoverflow.api;  import java.net.Authenticator; import java.net.InetSocketAddress; import java.net.PasswordAuthentication; import java.net.Proxy;  /**  * How do I make HttpURLConnection use a proxy?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/1433296\">https://stackoverflow.com/a/1433296</a>  */ public class APIzator1433296 {    public static void make() throws RuntimeException {     // Proxy instance, proxy ip = 10.0.0.1 with port 8080     Proxy proxy = new Proxy(       Proxy.Type.HTTP,       new InetSocketAddress(\"10.0.0.1\", 8080)     );     conn = new URL(urlString).openConnection(proxy);     Authenticator authenticator = new Authenticator() {        public PasswordAuthentication getPasswordAuthentication() {         return (new PasswordAuthentication(\"user\", \"password\".toCharArray()));       }     };     Authenticator.setDefault(authenticator);   } }"
---

https://stackoverflow.com/q/1432961

If I do this...
it prints
The problem is, I am behind a proxy. Where does the JVM get its proxy information from on Windows? How do I set this up? All my other apps seem perfectly happy with my proxy.


```java
conn = new URL(urlString).openConnection();
System.out.println("Proxy? " + conn.usingProxy());
Proxy? false
```


## Original code snippet

https://stackoverflow.com/a/1433296

Since java 1.5 you can also pass a java.net.Proxy instance to the openConnection(proxy) method:
If your proxy requires authentication it will give you response 407.
In this case you&#x27;ll need the following code:

```java
//Proxy instance, proxy ip = 10.0.0.1 with port 8080
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("10.0.0.1", 8080));
conn = new URL(urlString).openConnection(proxy);
Authenticator authenticator = new Authenticator() {

        public PasswordAuthentication getPasswordAuthentication() {
            return (new PasswordAuthentication("user",
                    "password".toCharArray()));
        }
    };
    Authenticator.setDefault(authenticator);
```

## Produced APIzation

[`APIzator1433296.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator1433296.java)

```java
package com.stackoverflow.api;

import java.net.Authenticator;
import java.net.InetSocketAddress;
import java.net.PasswordAuthentication;
import java.net.Proxy;

/**
 * How do I make HttpURLConnection use a proxy?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/1433296">https://stackoverflow.com/a/1433296</a>
 */
public class APIzator1433296 {

  public static void make() throws RuntimeException {
    // Proxy instance, proxy ip = 10.0.0.1 with port 8080
    Proxy proxy = new Proxy(
      Proxy.Type.HTTP,
      new InetSocketAddress("10.0.0.1", 8080)
    );
    conn = new URL(urlString).openConnection(proxy);
    Authenticator authenticator = new Authenticator() {

      public PasswordAuthentication getPasswordAuthentication() {
        return (new PasswordAuthentication("user", "password".toCharArray()));
      }
    };
    Authenticator.setDefault(authenticator);
  }
}

```