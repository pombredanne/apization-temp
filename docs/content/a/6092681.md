---
title: "[Q#6092642][A#6092681] How to remove a key from HashMap while iterating over it?"
question_title: "How to remove a key from HashMap while iterating over it?"
question_text: "I am having HashMap called testMap which contains String, String. When iterating the map, if value is match with specified string, I need to remove the key from map. i.e. testMap contains \"Sample\" but I am unable to remove the key from HashMap. Instead getting error :"
answer_text: "Try: With Java 1.8 and onwards you can do the above in just one line:"
apization_code: "package com.stackoverflow.api;  import com.gargoylesoftware.htmlunit.javascript.host.Iterator; import scala.collection.mutable.Map;  /**  * How to remove a key from HashMap while iterating over it?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/6092681\">https://stackoverflow.com/a/6092681</a>  */ public class APIzator6092681 {    public static void removeKey() throws RuntimeException {     Iterator<Map.Entry<String, String>> iter = TestMap.entrySet().iterator();     while (iter.hasNext()) {       Map.Entry<String, String> entry = iter.next();       if (\"Sample\".equalsIgnoreCase(entry.getValue())) {         iter.remove();       }     }     TestMap.entrySet().removeIf(entry -> !TestMap.contains(\"Sample\"));   } }"
---

https://stackoverflow.com/q/6092642

I am having HashMap called testMap which contains String, String.
When iterating the map, if value is match with specified string, I need to remove the key from map.
i.e.
testMap contains &quot;Sample&quot; but I am unable to remove the key from HashMap. Instead getting error :


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
HashMap<String, String> testMap = new HashMap<String, String>();
for(Map.Entry<String, String> entry : testMap.entrySet()) {
  if(entry.getValue().equalsIgnoreCase("Sample")) {
    testMap.remove(entry.getKey());
  }
}
"Exception in thread "main" java.util.ConcurrentModificationException
    at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
    at java.util.HashMap$EntryIterator.next(Unknown Source)
    at java.util.HashMap$EntryIterator.next(Unknown Source)"
```


## Original code snippet

https://stackoverflow.com/a/6092681

Try:
With Java 1.8 and onwards you can do the above in just one line:

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
Iterator<Map.Entry<String,String>> iter = TestMap.entrySet().iterator();
while (iter.hasNext()) {
    Map.Entry<String,String> entry = iter.next();
    if("Sample".equalsIgnoreCase(entry.getValue())){
        iter.remove();
    }
}
TestMap.entrySet().removeIf(entry -> !TestMap.contains("Sample"));
```

## Produced APIzation

[`APIzator6092681.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator6092681.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import com.gargoylesoftware.htmlunit.javascript.host.Iterator;
import scala.collection.mutable.Map;

/**
 * How to remove a key from HashMap while iterating over it?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/6092681">https://stackoverflow.com/a/6092681</a>
 */
public class APIzator6092681 {

  public static void removeKey() throws RuntimeException {
    Iterator<Map.Entry<String, String>> iter = TestMap.entrySet().iterator();
    while (iter.hasNext()) {
      Map.Entry<String, String> entry = iter.next();
      if ("Sample".equalsIgnoreCase(entry.getValue())) {
        iter.remove();
      }
    }
    TestMap.entrySet().removeIf(entry -> !TestMap.contains("Sample"));
  }
}

```