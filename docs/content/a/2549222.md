---
title: "[Q#2492076][A#2549222] Android Reading from an Input stream efficiently"
question_title: "Android Reading from an Input stream efficiently"
question_text: "I am making an HTTP get request to a website for an android application I am making. I am using a DefaultHttpClient and using HttpGet to issue the request. I get the entity response and from this obtain an InputStream object for getting the html of the page. I then cycle through the reply doing as follows: However this is horrendously slow. Is this inefficient? I'm not loading a big web page - www.cokezone.co.uk so the file size is not big. Is there a better way to do this? Thanks Andy"
answer_text: "The problem in your code is that it's creating lots of heavy String objects, copying their contents and performing operations on them. Instead, you should use StringBuilder to avoid creating new String objects on each append and to avoid copying the char arrays. The implementation for your case would be something like this: You can now use total without converting it to String, but if you need the result as a String, simply add: String result = total.toString(); I'll try to explain it better..."
apization_code: "package com.stackoverflow.api;  import java.io.BufferedReader; import java.io.InputStreamReader;  /**  * Android Reading from an Input stream efficiently  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/2549222\">https://stackoverflow.com/a/2549222</a>  */ public class APIzator2549222 {    public static void reading() throws RuntimeException {     BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));     StringBuilder total = new StringBuilder();     String line;     while ((line = r.readLine()) != null) {       total.append(line).append('\\n');     }   } }"
---

https://stackoverflow.com/q/2492076

I am making an HTTP get request to a website for an android application I am making.
I am using a DefaultHttpClient and using HttpGet to issue the request. I get the entity response and from this obtain an InputStream object for getting the html of the page.
I then cycle through the reply doing as follows:
However this is horrendously slow.
Is this inefficient? I&#x27;m not loading a big web page - www.cokezone.co.uk so the file size is not big. Is there a better way to do this?
Thanks
Andy


```java
BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));
String x = "";
x = r.readLine();
String total = "";

while(x!= null){
total += x;
x = r.readLine();
}
```


## Original code snippet

https://stackoverflow.com/a/2549222

The problem in your code is that it&#x27;s creating lots of heavy String objects, copying their contents and performing operations on them. Instead, you should use StringBuilder to avoid creating new String objects on each append and to avoid copying the char arrays. The implementation for your case would be something like this:
You can now use total without converting it to String, but if you need the result as a String, simply add:
String result = total.toString();
I&#x27;ll try to explain it better...

```java
BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));
StringBuilder total = new StringBuilder();
String line;
while ((line = r.readLine()) != null) {
    total.append(line).append('\n');
}
```

## Produced APIzation

[`APIzator2549222.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator2549222.java)

```java
package com.stackoverflow.api;

import java.io.BufferedReader;
import java.io.InputStreamReader;

/**
 * Android Reading from an Input stream efficiently
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/2549222">https://stackoverflow.com/a/2549222</a>
 */
public class APIzator2549222 {

  public static void reading() throws RuntimeException {
    BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));
    StringBuilder total = new StringBuilder();
    String line;
    while ((line = r.readLine()) != null) {
      total.append(line).append('\n');
    }
  }
}

```