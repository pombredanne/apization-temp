---
title: "[Q#7250229][A#7250265] Reading a binary input stream into a single byte array in Java"
question_title: "Reading a binary input stream into a single byte array in Java"
question_text: "The documentation says that one should not use available() method to determine the size of an InputStream. How can I read the whole content of an InputStream into a byte array? I could read multiple times into a buffer of a fixed size, but then, I will have to combine the data I read into a single byte array, which is a problem for me."
answer_text: "The simplest approach IMO is to use Guava and its ByteStreams class: Or for a file: Alternatively (if you didn't want to use Guava), you could create a ByteArrayOutputStream, and repeatedly read into a byte array and write into the ByteArrayOutputStream (letting that handle resizing), then call ByteArrayOutputStream.toByteArray(). Note that this approach works whether you can tell the length of your input or not - assuming you have enough memory, of course."
apization_code: "package com.stackoverflow.api;  import com.google.appengine.repackaged.com.google.common.io.ByteStreams; import com.google.appengine.repackaged.com.google.common.io.Files;  /**  * Reading a binary input stream into a single byte array in Java  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/7250265\">https://stackoverflow.com/a/7250265</a>  */ public class APIzator7250265 {    public static byte[] readStream() throws RuntimeException {     byte[] bytes = ByteStreams.toByteArray(in);     return Files.toByteArray(file);   } }"
---

https://stackoverflow.com/q/7250229

The documentation says that one should not use available() method to determine the size of an InputStream. How can I read the whole content of an InputStream into a byte array?
I could read multiple times into a buffer of a fixed size, but then, I will have to combine the data I read into a single byte array, which is a problem for me.


```java
InputStream in; //assuming already present
byte[] data = new byte[in.available()];
in.read(data);//now data is filled with the whole content of the InputStream
```


## Original code snippet

https://stackoverflow.com/a/7250265

The simplest approach IMO is to use Guava and its ByteStreams class:
Or for a file:
Alternatively (if you didn&#x27;t want to use Guava), you could create a ByteArrayOutputStream, and repeatedly read into a byte array and write into the ByteArrayOutputStream (letting that handle resizing), then call ByteArrayOutputStream.toByteArray().
Note that this approach works whether you can tell the length of your input or not - assuming you have enough memory, of course.

```java
byte[] bytes = ByteStreams.toByteArray(in);
byte[] bytes = Files.toByteArray(file);
```

## Produced APIzation

[`APIzator7250265.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator7250265.java)

```java
package com.stackoverflow.api;

import com.google.appengine.repackaged.com.google.common.io.ByteStreams;
import com.google.appengine.repackaged.com.google.common.io.Files;

/**
 * Reading a binary input stream into a single byte array in Java
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/7250265">https://stackoverflow.com/a/7250265</a>
 */
public class APIzator7250265 {

  public static byte[] readStream() throws RuntimeException {
    byte[] bytes = ByteStreams.toByteArray(in);
    return Files.toByteArray(file);
  }
}

```