---
title: "[Q#12732422][A#15555952] Adding header for HttpURLConnection"
question_title: "Adding header for HttpURLConnection"
question_text: "I'm trying to add header for my request using HttpUrlConnection but the method setRequestProperty() doesn't seem working. The server side doesn't receive any request with my header."
answer_text: "I have used the following code in the past and it had worked with basic authentication enabled in TomCat: You can try the above code.  The code above is for POST, and you can modify it for GET"
apization_code: "package com.stackoverflow.api;  import android.util.Base64; import java.net.HttpURLConnection;  /**  * Adding header for HttpURLConnection  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/15555952\">https://stackoverflow.com/a/15555952</a>  */ public class APIzator15555952 {    public static void addHeader(String userCredentials) throws RuntimeException {     URL myURL = new URL(serviceURL);     HttpURLConnection myURLConnection = (HttpURLConnection) myURL.openConnection();     String basicAuth =       \"Basic \" + new String(new Base64().encode(userCredentials.getBytes()));     myURLConnection.setRequestProperty(\"Authorization\", basicAuth);     myURLConnection.setRequestMethod(\"POST\");     myURLConnection.setRequestProperty(       \"Content-Type\",       \"application/x-www-form-urlencoded\"     );     myURLConnection.setRequestProperty(       \"Content-Length\",       \"\" + postData.getBytes().length     );     myURLConnection.setRequestProperty(\"Content-Language\", \"en-US\");     myURLConnection.setUseCaches(false);     myURLConnection.setDoInput(true);     myURLConnection.setDoOutput(true);   } }"
---

https://stackoverflow.com/q/12732422

I&#x27;m trying to add header for my request using HttpUrlConnection but the method setRequestProperty() doesn&#x27;t seem working. The server side doesn&#x27;t receive any request with my header.


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
HttpURLConnection hc;
    try {
        String authorization = "";
        URL address = new URL(url);
        hc = (HttpURLConnection) address.openConnection();


        hc.setDoOutput(true);
        hc.setDoInput(true);
        hc.setUseCaches(false);

        if (username != null && password != null) {
            authorization = username + ":" + password;
        }

        if (authorization != null) {
            byte[] encodedBytes;
            encodedBytes = Base64.encode(authorization.getBytes(), 0);
            authorization = "Basic " + encodedBytes;
            hc.setRequestProperty("Authorization", authorization);
        }
```


## Original code snippet

https://stackoverflow.com/a/15555952

I have used the following code in the past and it had worked with basic authentication enabled in TomCat:
You can try the above code.  The code above is for POST, and you can modify it for GET

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
URL myURL = new URL(serviceURL);
HttpURLConnection myURLConnection = (HttpURLConnection)myURL.openConnection();
String userCredentials = "username:password";
String basicAuth = "Basic " + new String(new Base64().encode(userCredentials.getBytes()));
myURLConnection.setRequestProperty ("Authorization", basicAuth);
myURLConnection.setRequestMethod("POST");
myURLConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
myURLConnection.setRequestProperty("Content-Length", "" + postData.getBytes().length);
myURLConnection.setRequestProperty("Content-Language", "en-US");
myURLConnection.setUseCaches(false);
myURLConnection.setDoInput(true);
myURLConnection.setDoOutput(true);
```

## Produced APIzation

[`APIzator15555952.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator15555952.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import android.util.Base64;
import java.net.HttpURLConnection;

/**
 * Adding header for HttpURLConnection
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/15555952">https://stackoverflow.com/a/15555952</a>
 */
public class APIzator15555952 {

  public static void addHeader(String userCredentials) throws RuntimeException {
    URL myURL = new URL(serviceURL);
    HttpURLConnection myURLConnection = (HttpURLConnection) myURL.openConnection();
    String basicAuth =
      "Basic " + new String(new Base64().encode(userCredentials.getBytes()));
    myURLConnection.setRequestProperty("Authorization", basicAuth);
    myURLConnection.setRequestMethod("POST");
    myURLConnection.setRequestProperty(
      "Content-Type",
      "application/x-www-form-urlencoded"
    );
    myURLConnection.setRequestProperty(
      "Content-Length",
      "" + postData.getBytes().length
    );
    myURLConnection.setRequestProperty("Content-Language", "en-US");
    myURLConnection.setUseCaches(false);
    myURLConnection.setDoInput(true);
    myURLConnection.setDoOutput(true);
  }
}

```