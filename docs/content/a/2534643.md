---
title: "[Q#2534632][A#2534643] List all files from a directory recursively with Java"
question_title: "List all files from a directory recursively with Java"
question_text: "I have this function that prints the name of all the files in a directory recursively. The problem is that my code is very slow because it has to access a remote network device with every iteration. My plan is to first load all the files from the directory recursively and then after that go through all files with the regex to filter out all the files I don't want. Does anyone have a better suggestion? This is just a test later on I'm not going to use the code like this, instead I'm going to add the path and modification date of every file which matches an advanced regex to an array."
answer_text: "Assuming this is actual production code you'll be writing, then I suggest using the solution to this sort of thing that's already been solved - Apache Commons IO, specifically FileUtils.listFiles(). It handles nested directories, filters (based on name, modification time, etc). For example, for your regex: This will recursively search for files matching the ^(.*?) regex, returning the results as a collection. It's worth noting that this will be no faster than rolling your own code, it's doing the same thing - trawling a filesystem in Java is just slow. The difference is, the Apache Commons version will have no bugs in it."
apization_code: "package com.stackoverflow.api;  import com.sun.jna.platform.FileUtils; import java.util.Collection; import org.apache.commons.io.filefilter.DirectoryFileFilter; import org.apache.commons.io.filefilter.RegexFileFilter;  /**  * List all files from a directory recursively with Java  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/2534643\">https://stackoverflow.com/a/2534643</a>  */ public class APIzator2534643 {    public static Collection listFile() throws RuntimeException {     return FileUtils.listFiles(       dir,       new RegexFileFilter(\"^(.*?)\"),       DirectoryFileFilter.DIRECTORY     );   } }"
---

https://stackoverflow.com/q/2534632

I have this function that prints the name of all the files in a directory recursively. The problem is that my code is very slow because it has to access a remote network device with every iteration.
My plan is to first load all the files from the directory recursively and then after that go through all files with the regex to filter out all the files I don&#x27;t want. Does anyone have a better suggestion?
This is just a test later on I&#x27;m not going to use the code like this, instead I&#x27;m going to add the path and modification date of every file which matches an advanced regex to an array.


<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
public static printFnames(String sDir){
  File[] faFiles = new File(sDir).listFiles();
  for(File file: faFiles){
    if(file.getName().matches("^(.*?)")){
      System.out.println(file.getAbsolutePath());
    }
    if(file.isDirectory()){
      printFnames(file.getAbsolutePath());
    }
  }
}
```


## Original code snippet

https://stackoverflow.com/a/2534643

Assuming this is actual production code you&#x27;ll be writing, then I suggest using the solution to this sort of thing that&#x27;s already been solved - Apache Commons IO, specifically FileUtils.listFiles(). It handles nested directories, filters (based on name, modification time, etc).
For example, for your regex:
This will recursively search for files matching the ^(.*?) regex, returning the results as a collection.
It&#x27;s worth noting that this will be no faster than rolling your own code, it&#x27;s doing the same thing - trawling a filesystem in Java is just slow. The difference is, the Apache Commons version will have no bugs in it.

<div class="code-logo"><img src="/stackoverflow.png" /></div>

```java
Collection files = FileUtils.listFiles(
  dir, 
  new RegexFileFilter("^(.*?)"), 
  DirectoryFileFilter.DIRECTORY
);
```

## Produced APIzation

[`APIzator2534643.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/search/APIzator2534643.java)

<div class="code-logo"><img src="/apizator.png" /></div>

```java
package com.stackoverflow.api;

import com.sun.jna.platform.FileUtils;
import java.util.Collection;
import org.apache.commons.io.filefilter.DirectoryFileFilter;
import org.apache.commons.io.filefilter.RegexFileFilter;

/**
 * List all files from a directory recursively with Java
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/2534643">https://stackoverflow.com/a/2534643</a>
 */
public class APIzator2534643 {

  public static Collection listFile() throws RuntimeException {
    return FileUtils.listFiles(
      dir,
      new RegexFileFilter("^(.*?)"),
      DirectoryFileFilter.DIRECTORY
    );
  }
}

```