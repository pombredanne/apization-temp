---
title: "[Q#7194522][A#7194914] How to putAll on Java hashMap contents of one to another, but not replace existing keys and values?"
question_title: "How to putAll on Java hashMap contents of one to another, but not replace existing keys and values?"
question_text: "I need to copy all keys and values from one A HashMap onto another one B, but not to replace existing keys and values. Whats the best way to do that? I was thinking instead iterating the keySet and checkig if it exist or not, I would"
answer_text: "It looks like you are willing to create a temporary Map, so I'd do it like this: Here, patch is the map that you are adding to the target map. Thanks to Louis Wasserman, here's a version that takes advantage of the new methods in Java 8:"
apization_code: "package com.stackoverflow.api;  import java.util.HashMap; import java.util.IdentityHashMap; import java.util.Map; import java.util.Map;  /**  * How to putAll on Java hashMap contents of one to another, but not replace existing keys and values?  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/7194914\">https://stackoverflow.com/a/7194914</a>  */ public class APIzator7194914 {    public static void putall(IdentityHashMap target, Map patch)     throws RuntimeException {     Map tmp = new HashMap(patch);     tmp.keySet().removeAll(target.keySet());     target.putAll(tmp);     patch.forEach(target::putIfAbsent);   } }"
---

https://stackoverflow.com/q/7194522

I need to copy all keys and values from one A HashMap onto another one B, but not to replace existing keys and values.
Whats the best way to do that?
I was thinking instead iterating the keySet and checkig if it exist or not, I would


```java
Map temp = new HashMap(); // generic later
temp.putAll(Amap);
A.clear();
A.putAll(Bmap);
A.putAll(temp);
```


## Original code snippet

https://stackoverflow.com/a/7194914

It looks like you are willing to create a temporary Map, so I&#x27;d do it like this:
Here, patch is the map that you are adding to the target map.
Thanks to Louis Wasserman, here&#x27;s a version that takes advantage of the new methods in Java 8:

```java
Map tmp = new HashMap(patch);
tmp.keySet().removeAll(target.keySet());
target.putAll(tmp);
patch.forEach(target::putIfAbsent);
```

## Produced APIzation

[`APIzator7194914.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator7194914.java)

```java
package com.stackoverflow.api;

import java.util.HashMap;
import java.util.IdentityHashMap;
import java.util.Map;
import java.util.Map;

/**
 * How to putAll on Java hashMap contents of one to another, but not replace existing keys and values?
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/7194914">https://stackoverflow.com/a/7194914</a>
 */
public class APIzator7194914 {

  public static void putall(IdentityHashMap target, Map patch)
    throws RuntimeException {
    Map tmp = new HashMap(patch);
    tmp.keySet().removeAll(target.keySet());
    target.putAll(tmp);
    patch.forEach(target::putIfAbsent);
  }
}

```