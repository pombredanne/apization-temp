---
title: "[Q#7986750][A#10784731] Create session factory in Hibernate 4"
question_title: "Create session factory in Hibernate 4"
question_text: "I'm having trouble generating a session factory in Hibernate 4. In Hibernate 3 I simple did: Now I need to pass a ServiceRegistry class to buildSessionFactory, but the Javadocs are extremely vague on how to go about this. Any tips?"
answer_text: "Yes, they have deprecated the previous buildSessionFactory API, and it's quite easy to do well.. you can do something like this.. EDIT : ServiceRegistryBuilder is deprecated. you must use StandardServiceRegistryBuilder For more reference and in depth detail, you can check the hibernate's official test case at https://github.com/hibernate/hibernate-orm/blob/master/hibernate-testing/src/main/java/org/hibernate/testing/junit4/BaseCoreFunctionalTestCase.java function (buildSessionFactory())."
apization_code: "package com.stackoverflow.api;  import android.content.res.Configuration; import org.h2.engine.Session; import org.h2.engine.SessionFactory; import org.hibernate.boot.registry.StandardServiceRegistryBuilder;  /**  * Create session factory in Hibernate 4  *  * @author APIzator  * @see <a href=\"https://stackoverflow.com/a/10784731\">https://stackoverflow.com/a/10784731</a>  */ public class APIzator10784731 {    public static void testConnection() throws Exception {     logger.info(\"Trying to create a test connection with the database.\");     Configuration configuration = new Configuration();     configuration.configure(\"hibernate_sp.cfg.xml\");     StandardServiceRegistryBuilder ssrb = new StandardServiceRegistryBuilder()     .applySettings(configuration.getProperties());     SessionFactory sessionFactory = configuration.buildSessionFactory(       ssrb.build()     );     Session session = sessionFactory.openSession();     logger.info(\"Test connection with the database created successfuly.\");   } }"
---

https://stackoverflow.com/q/7986750

I&#x27;m having trouble generating a session factory in Hibernate 4. In Hibernate 3 I simple did:
Now I need to pass a ServiceRegistry class to buildSessionFactory, but the Javadocs are extremely vague on how to go about this. Any tips?


```java
org.hibernate.cfg.Configuration conf= HibernateUtil
    .getLimsInitializedConfiguration(systemConfiguration
.getHibernateconfFile());

SessionFactory sf = conf.configure().buildSessionFactory();
```


## Original code snippet

https://stackoverflow.com/a/10784731

Yes, they have deprecated the previous buildSessionFactory API, and it&#x27;s quite easy to do well.. you can do something like this..
EDIT : ServiceRegistryBuilder is deprecated. you must use StandardServiceRegistryBuilder
For more reference and in depth detail, you can check the hibernate&#x27;s official test case at https://github.com/hibernate/hibernate-orm/blob/master/hibernate-testing/src/main/java/org/hibernate/testing/junit4/BaseCoreFunctionalTestCase.java function (buildSessionFactory()).

```java
public void testConnection() throws Exception {

            logger.info("Trying to create a test connection with the database.");
            Configuration configuration = new Configuration();
            configuration.configure("hibernate_sp.cfg.xml");
            StandardServiceRegistryBuilder ssrb = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());
            SessionFactory sessionFactory = configuration.buildSessionFactory(ssrb.build());
            Session session = sessionFactory.openSession();
            logger.info("Test connection with the database created successfuly.");
    }
```

## Produced APIzation

[`APIzator10784731.java`](https://github.com/pasqualesalza/apization-temp-data/raw/master/apizations/java/APIzator10784731.java)

```java
package com.stackoverflow.api;

import android.content.res.Configuration;
import org.h2.engine.Session;
import org.h2.engine.SessionFactory;
import org.hibernate.boot.registry.StandardServiceRegistryBuilder;

/**
 * Create session factory in Hibernate 4
 *
 * @author APIzator
 * @see <a href="https://stackoverflow.com/a/10784731">https://stackoverflow.com/a/10784731</a>
 */
public class APIzator10784731 {

  public static void testConnection() throws Exception {
    logger.info("Trying to create a test connection with the database.");
    Configuration configuration = new Configuration();
    configuration.configure("hibernate_sp.cfg.xml");
    StandardServiceRegistryBuilder ssrb = new StandardServiceRegistryBuilder()
    .applySettings(configuration.getProperties());
    SessionFactory sessionFactory = configuration.buildSessionFactory(
      ssrb.build()
    );
    Session session = sessionFactory.openSession();
    logger.info("Test connection with the database created successfuly.");
  }
}

```